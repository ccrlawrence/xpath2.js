!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.xpath2=t():e.xpath2=t()}(this,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=51)}([function(e,t,n){(function(t){var n=t.Error;function i(e,t){this.code=e,this.message=t||o[e]}i.prototype=new n;var o={XPDY0002:"Evaluation of an expression relies on some part of the dynamic context that has not been assigned a value.",XPST0003:"Expression is not a valid instance of the grammar",XPTY0004:"Type is not appropriate for the context in which the expression occurs",XPST0008:"Expression refers to an element name, attribute name, schema type name, namespace prefix, or variable name that is not defined in the static context",XPST0010:"Axis not supported",XPST0017:"Expanded QName and number of arguments in a function call do not match the name and arity of a function signature",XPTY0018:"The result of the last step in a path expression contains both nodes and atomic values",XPTY0019:"The result of a step (other than the last step) in a path expression contains an atomic value.",XPTY0020:"In an axis step, the context item is not a node.",XPST0051:"It is a static error if a QName that is used as an AtomicType in a SequenceType is not defined in the in-scope schema types as an atomic type.",XPST0081:"A QName used in an expression contains a namespace prefix that cannot be expanded into a namespace URI by using the statically known namespaces.",FORG0001:"Invalid value for cast/constructor.",FORG0003:"fn:zero-or-one called with a sequence containing more than one item.",FORG0004:"fn:one-or-more called with a sequence containing no items.",FORG0005:"fn:exactly-one called with a sequence containing zero or more than one item.",FORG0006:"Invalid argument type.",FODC0001:"No context document.",FORX0001:"Invalid regular expression flags.",FOCA0002:"Invalid lexical value.",FOCH0002:"Unsupported collation.",FONS0004:"No namespace found for prefix."};e.exports=i}).call(this,n(2))},function(e,t){function n(){}n.ANYSIMPLETYPE_DT=1,n.STRING_DT=2,n.BOOLEAN_DT=3,n.DECIMAL_DT=4,n.FLOAT_DT=5,n.DOUBLE_DT=6,n.DURATION_DT=7,n.DATETIME_DT=8,n.TIME_DT=9,n.DATE_DT=10,n.GYEARMONTH_DT=11,n.GYEAR_DT=12,n.GMONTHDAY_DT=13,n.GDAY_DT=14,n.GMONTH_DT=15,n.HEXBINARY_DT=16,n.BASE64BINARY_DT=17,n.ANYURI_DT=18,n.QNAME_DT=19,n.NOTATION_DT=20,n.NORMALIZEDSTRING_DT=21,n.TOKEN_DT=22,n.LANGUAGE_DT=23,n.NMTOKEN_DT=24,n.NAME_DT=25,n.NCNAME_DT=26,n.ID_DT=27,n.IDREF_DT=28,n.ENTITY_DT=29,n.INTEGER_DT=30,n.NONPOSITIVEINTEGER_DT=31,n.NEGATIVEINTEGER_DT=32,n.LONG_DT=33,n.INT_DT=34,n.SHORT_DT=35,n.BYTE_DT=36,n.NONNEGATIVEINTEGER_DT=37,n.UNSIGNEDLONG_DT=38,n.UNSIGNEDINT_DT=39,n.UNSIGNEDSHORT_DT=40,n.UNSIGNEDBYTE_DT=41,n.POSITIVEINTEGER_DT=42,n.LISTOFUNION_DT=43,n.LIST_DT=44,n.UNAVAILABLE_DT=45,n.DATETIMESTAMP_DT=46,n.DAYMONTHDURATION_DT=47,n.DAYTIMEDURATION_DT=48,n.PRECISIONDECIMAL_DT=49,n.ANYATOMICTYPE_DT=50,n.ANYTYPE_DT=51,n.XT_YEARMONTHDURATION_DT=-1,n.XT_UNTYPEDATOMIC_DT=-2,e.exports=n},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(t){n(0);var i=n(1),o=n(6),r=n(4),a=t.String;function s(e){this.value=e}s.prototype=new r,s.prototype.value=null,s.prototype.builtInKind=i.STRING_DT,s.prototype.primitiveKind=o.PRIMITIVE_STRING,s.prototype.valueOf=function(){return this.value},s.prototype.toString=function(){return this.value},s.cast=function(e){return new s(a(e))},e.exports=s}).call(this,n(2))},function(e,t,n){var i=n(0),o=n(1),r=n(6);function a(){}a.prototype=new r,a.prototype.builtInKind=o.ANYATOMICTYPE_DT,a.cast=function(e){throw new i("XPST0017","Abstract type used in constructor function xs:anyAtomicType")},a.isNumeric=function(e){return e.primitiveKind==r.PRIMITIVE_FLOAT||e.primitiveKind==r.PRIMITIVE_DOUBLE||e.primitiveKind==r.PRIMITIVE_DECIMAL},e.exports=a},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(14),a=n(3),s=t.isNaN,u=t.String;function f(e){this.value=e}f.prototype=new r,f.prototype.builtInKind=o.INTEGER_DT;var c=/^[-+]?[0-9]+$/;f.cast=function(e){if(e instanceof f)return new f(e.value);if(e instanceof a||e instanceof cXSUntypedAtomic){if((t=e,u(t).trim()).match(c))return new f(+e);throw new i("FORG0001")}var t;if(e instanceof cXSBoolean)return new f(1*e);if(cXSAnyAtomicType.isNumeric(e)){if(!s(e)&&fIsFinite(e))return new f(+e);throw new i("FOCA0002","Cannot convert '"+e+"' to xs:integer")}throw new i("XPTY0004","Casting value '"+e+"' to xs:integer can never succeed")},e.exports=f}).call(this,n(2))},function(e,t,n){var i=n(1),o=n(25);function r(){}r.prototype=new o,r.prototype.builtInKind=i.ANYSIMPLETYPE_DT,r.prototype.primitiveKind=null,r.PRIMITIVE_ANYURI="anyURI",r.PRIMITIVE_BASE64BINARY="base64Binary",r.PRIMITIVE_BOOLEAN="boolean",r.PRIMITIVE_DATE="date",r.PRIMITIVE_DATETIME="dateTime",r.PRIMITIVE_DECIMAL="decimal",r.PRIMITIVE_DOUBLE="double",r.PRIMITIVE_DURATION="duration",r.PRIMITIVE_FLOAT="float",r.PRIMITIVE_GDAY="gDay",r.PRIMITIVE_GMONTH="gMonth",r.PRIMITIVE_GMONTHDAY="gMonthDay",r.PRIMITIVE_GYEAR="gYear",r.PRIMITIVE_GYEARMONTH="gYearMonth",r.PRIMITIVE_HEXBINARY="hexBinary",r.PRIMITIVE_NOTATION="NOTATION",r.PRIMITIVE_QNAME="QName",r.PRIMITIVE_STRING="string",r.PRIMITIVE_TIME="time",e.exports=r},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(6),a=n(4),s=n(10),u=n(3),f=t.String;function c(e){this.value=e}c.prototype=new a,c.prototype.builtInKind=o.BOOLEAN_DT,c.prototype.primitiveKind=r.PRIMITIVE_BOOLEAN,c.prototype.value=null,c.prototype.valueOf=function(){return this.value},c.prototype.toString=function(){return f(this.value)};var l=/^(0|1|true|false)$/;c.cast=function(e){if(e instanceof c)return e;if(e instanceof u||e instanceof s){var t;if(t=(n=e,f(n).trim()).match(l))return new c("1"==t[1]||"true"==t[1]);throw new i("FORG0001")}var n;if(a.isNumeric(e))return new c(0!=e);throw new i("XPTY0004","Casting value '"+e+"' to xs:boolean can never succeed")},e.exports=c}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=n(4),r=n(10),a=n(7),s=n(17),u=n(3),f=n(15),c=n(12),l=n(29),p=n(56),m=n(57),h=n(58),d=n(59),y=n(60),v=t.isNaN;function w(){}w.toEBV=function(e,t){if(!e.length)return!1;var n=e[0];if(t.DOMAdapter.isNode(n))return!0;if(1==e.length){if(n instanceof a)return n.value.valueOf();if(n instanceof u)return!!n.valueOf().length;if(o.isNumeric(n))return!(v(n.valueOf())||0==n.valueOf());throw new i("FORG0006","Effective boolean value is defined only for sequences containing booleans, strings, numbers, URIs, or nodes")}throw new i("FORG0006","Effective boolean value is not defined for a sequence of two or more items")},w.atomize=function(e,t){for(var n,i,a=[],s=0,u=e.length;s<u;s++){if(i=null,null==(n=e[s]))i=null;else if(t.DOMAdapter.isNode(n)){var f=t.DOMAdapter.getProperty;switch(f(n,"nodeType")){case 1:i=new r(f(n,"textContent"));break;case 2:i=new r(f(n,"value"));break;case 3:case 4:case 8:case 7:i=new r(f(n,"data"));break;case 9:var c=f(n,"documentElement");i=new r(c?f(c,"textContent"):"")}}else n instanceof o&&(i=n);null!=i&&a.push(i)}return a},w.order=function(e,t){return e.sort((function(e,n){var i=t.DOMAdapter.compareDocumentPosition(e,n);return 2&i?1:4&i?-1:0}))},w.assertSequenceItemType=function(e,t,n,a){for(var v,T,g=0,D=e.length;g<D;g++)if(T=e[g],n==c||n.prototype instanceof c){if(!t.DOMAdapter.isNode(T))throw new i("XPTY0004","Required item type of "+a+" is "+n);if(n!=c&&(v=t.DOMAdapter.getProperty(T,"nodeType"),[null,l,p,m,m,null,null,h,d,y,null,null,null][v]!=n))throw new i("XPTY0004","Required item type of "+a+" is "+n)}else if(n==o||n.prototype instanceof o){if(T=w.atomize([T],t)[0],n!=o&&(T instanceof r?T=n.cast(T):n==u?T instanceof f&&(T=u.cast(T)):n==s&&o.isNumeric(T)&&(T=n.cast(T))),!(T instanceof n))throw new i("XPTY0004","Required item type of "+a+" is "+n);e[g]=T}},w.assertSequenceCardinality=function(e,t,n,o){var r=e.length;if("?"==n){if(r>1)throw new i("XPTY0004","Required cardinality of "+o+" is one or zero")}else if("+"==n){if(r<1)throw new i("XPTY0004","Required cardinality of "+o+" is one or more")}else if("*"!=n&&1!=r)throw new i("XPTY0004","Required cardinality of "+o+" is exactly one")},e.exports=w}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=t.Function;function r(e,t){this.namespaceResolver=e||null,this.baseURI=t||null,this.dataTypes={},this.documents={},this.functions={},this.collations={},this.collections={}}r.prototype.baseURI=null,r.prototype.dataTypes=null,r.prototype.documents=null,r.prototype.functions=null,r.prototype.defaultFunctionNamespace=null,r.prototype.collations=null,r.prototype.defaultCollationName="http://www.w3.org/2005/xpath-functions/collation/codepoint",r.prototype.collections=null,r.prototype.defaultCollection=null,r.prototype.namespaceResolver=null,r.prototype.defaultElementNamespace=null,r.NS_XSD="http://www.w3.org/2001/XMLSchema",r.NS_XPF="http://www.w3.org/2005/xpath-functions",r.NS_XNS="http://www.w3.org/2000/xmlns/",r.NS_XML="http://www.w3.org/XML/1998/namespace";var a=/^(?:\{([^\}]+)\})?(.+)$/;r.prototype.setDataType=function(e,t){var n=e.match(a);n&&n[1]!=r.NS_XSD&&(this.dataTypes[e]=t)},r.prototype.getDataType=function(e){var t=e.match(a);if(t)return t[1]==r.NS_XSD?r.dataTypes[t[2]]:this.dataTypes[e]},r.prototype.setDocument=function(e,t){this.documents[e]=t},r.prototype.getDocument=function(e){return this.documents[e]},r.prototype.setFunction=function(e,t){var n=e.match(a);n&&n[1]!=r.NS_XPF&&(this.functions[e]=t)},r.prototype.getFunction=function(e){var t=e.match(a);if(t)return t[1]==r.NS_XPF?r.functions[t[2]]:this.functions[e]},r.prototype.setCollation=function(e,t){this.collations[e]=t},r.prototype.getCollation=function(e){return this.collations[e]},r.prototype.setCollection=function(e,t){this.collections[e]=t},r.prototype.getCollection=function(e){return this.collections[e]},r.prototype.getURIForPrefix=function(e){var t,n=this.namespaceResolver,a=n&&n.lookupNamespaceURI?n.lookupNamespaceURI:n;if(a instanceof o&&(t=a.call(n,e)))return t;if("fn"==e)return r.NS_XPF;if("xs"==e)return r.NS_XSD;if("xml"==e)return r.NS_XML;if("xmlns"==e)return r.NS_XNS;throw new i("XPST0081","Prefix '"+e+"' has not been declared")},r.functions={},r.signatures={},r.dataTypes={},r.operators={},r.defineSystemFunction=function(e,t,n){r.functions[e]=n,r.signatures[e]=t},r.defineSystemDataType=function(e,t){r.dataTypes[e]=t},r.defineSystemOperator=function(e,t){r.operators[e]=t},e.exports=r}).call(this,n(2))},function(e,t,n){(function(t){n(0);var i=n(1),o=n(4),r=t.String;function a(e){this.value=e}a.prototype=new o,a.prototype.builtInKind=i.XT_UNTYPEDATOMIC_DT,a.prototype.toString=function(){return r(this.value)},a.cast=function(e){return e instanceof a?e:new a(r(e))},e.exports=a}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(6),a=n(4),s=n(10),u=n(3),f=n(13),c=t.Array,l=t.Math,p=t.String;function m(e,t,n,i,o,r,a,s){this.year=e,this.month=t,this.day=n,this.hours=i,this.minutes=o,this.seconds=r,this.timezone=a,this.negative=s}m.prototype=new a,m.prototype.builtInKind=o.DATETIME_DT,m.prototype.primitiveKind=r.PRIMITIVE_DATETIME,m.prototype.year=null,m.prototype.month=null,m.prototype.day=null,m.prototype.hours=null,m.prototype.minutes=null,m.prototype.seconds=null,m.prototype.timezone=null,m.prototype.negative=null,m.prototype.toString=function(){return m.getDateComponent(this)+"T"+m.getTimeComponent(this)+m.getTZComponent(this)};var h=/^(-?)([1-9]\d\d\d+|0\d\d\d)-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])T(([01]\d|2[0-3]):([0-5]\d):([0-5]\d)(?:\.(\d+))?|(24:00:00)(?:\.(0+))?)(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;m.cast=function(e){if(e instanceof m)return e;if(e instanceof u||e instanceof s){var t=(c=e,p(c).trim()).match(h);if(t){var n=+t[2],o=+t[3],a=+t[4],f=!!t[10];if(a-1<m.getDaysForYearMonth(n,o))return m.normalize(new m(n,o,a,f?24:+t[6],f?0:+t[7],+((f?0:t[8])+"."+(f?0:t[9]||0)),t[12]?"Z"==t[12]?0:("-"==t[13]?-1:1)*(60*t[14]+1*t[15]):null,"-"==t[1]));throw new i("FORG0001","Invalid date '"+e+"' (Non-existent date)")}throw new i("FORG0001")}var c;if(e.primitiveKind==r.PRIMITIVE_DATE)return new m(e.year,e.month,e.day,0,0,0,e.timezone,e.negative);throw new i("XPTY0004","Casting value '"+e+"' to xs:dateTime can never succeed")},m.pad=function(e,t){var n=p(e);return arguments.length<2&&(t=2),(n.length<t+1?new c(t+1-n.length).join("0"):"")+n};var d=[31,28,31,30,31,30,31,31,30,31,30,31];m.getDaysForYearMonth=function(e,t){return 2==t&&(e%400==0||e%100!=0&&e%4==0)?29:d[t-1]},m.getTZComponent=function(e){var t=e.timezone;return null==t?"":t?(t>0?"+":"-")+m.pad(l.abs(~~(t/60)))+":"+m.pad(l.abs(t%60)):"Z"},m.getDateComponent=function(e){return(e.negative?"-":"")+m.pad(e.year,4)+"-"+m.pad(e.month)+"-"+m.pad(e.day)},m.getTimeComponent=function(e){var t=p(e.seconds).split(".");return m.pad(e.hours)+":"+m.pad(e.minutes)+":"+m.pad(t[0])+(t.length>1?"."+t[1]:"")},m.normalizeDate=function(e,t){if(!t){var n=m.getDaysForYearMonth(e.year,e.month);if(e.day>n)for(;e.day>n;)e.month+=1,e.month>12&&(e.year+=1,0==e.year&&(e.year=1),e.month=1),e.day-=n,n=m.getDaysForYearMonth(e.year,e.month);else if(e.day<1)for(;e.day<1;)e.month-=1,e.month<1&&(e.year-=1,0==e.year&&(e.year=-1),e.month=12),n=m.getDaysForYearMonth(e.year,e.month),e.day+=n}return e.month>12?(e.year+=~~(e.month/12),0==e.year&&(e.year=1),e.month=e.month%12):e.month<1&&(e.year+=~~(e.month/12)-1,0==e.year&&(e.year=-1),e.month=e.month%12+12),e},m.normalizeTime=function(e){return(e.seconds>=60||e.seconds<0)&&(e.minutes+=~~(e.seconds/60)-(e.seconds<0&&e.seconds%60?1:0),e.seconds=e.seconds%60+(e.seconds<0&&e.seconds%60?60:0)),(e.minutes>=60||e.minutes<0)&&(e.hours+=~~(e.minutes/60)-(e.minutes<0&&e.minutes%60?1:0),e.minutes=e.minutes%60+(e.minutes<0&&e.minutes%60?60:0)),(e.hours>=24||e.hours<0)&&(e instanceof m&&(e.day+=~~(e.hours/24)-(e.hours<0&&e.hours%24?1:0)),e.hours=e.hours%24+(e.hours<0&&e.hours%24?24:0)),e},m.normalize=function(e){return m.normalizeDate(m.normalizeTime(e))},m.adjustTimezone=function(e,t){if(null==e)return null;if(null==t)e.timezone=null;else{var n=f.toSeconds(t)/60;if(null!=e.timezone){var i=n-e.timezone;e.primitiveKind==r.PRIMITIVE_DATE?i<0&&e.day--:(e.minutes+=i%60,e.hours+=~~(i/60)),m.normalize(e)}e.timezone=n}return e},e.exports=m}).call(this,n(2))},function(e,t,n){var i=n(28);function o(){}o.prototype=new i,e.exports=o},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(19),a=n(3),s=t.String,u=t.Math;function f(e,t,n,i,o){r.call(this,0,0,e,t,n,i,o)}f.prototype=new r,f.prototype.builtInKind=o.DAYTIMEDURATION_DT,f.prototype.toString=function(){return(this.negative?"-":"")+"P"+(r.getDayTimeComponent(this)||"T0S")};var c=/^(-)?P(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:((?:(?:[0-9]+(?:.[0-9]*)?)|(?:.[0-9]+)))S)?)?$/;f.cast=function(e){if(e instanceof f)return e;if(e instanceof a||e instanceof cXSUntypedAtomic){var t=(n=e,s(n).trim()).match(c);if(t)return r.normalizeDayTimeDuration(new f(+t[2]||0,+t[3]||0,+t[4]||0,+t[5]||0,"-"==t[1]));throw new i("FORG0001")}var n;if(e.builtInKind==o.XT_YEARMONTHDURATION_DT)return new f(0,0,0,0);if(e instanceof r)return new f(e.day,e.hours,e.minutes,e.seconds,e.negative);throw new i("XPTY0004","Casting value '"+e+"' to xs:dayTimeDuration can never succeed")},f.toSeconds=function(e){return(60*(60*(24*e.day+e.hours)+e.minutes)+e.seconds)*(e.negative?-1:1)},f.fromSeconds=function(e){var t=(e=u.round(e))<0,n=~~((e=u.abs(e))/86400),i=~~((e-=3600*n*24)/3600),o=~~((e-=3600*i)/60);return new f(n,i,o,e-=60*o,t)},e.exports=f}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(10),a=n(3),s=n(7),u=n(6),f=n(4),c=t.isNaN,l=t.isFinite,p=t.String;function m(e){this.value=e}m.prototype=new f,m.prototype.builtInKind=o.DECIMAL_DT,m.prototype.primitiveKind=u.PRIMITIVE_DECIMAL,m.prototype.value=null,m.prototype.valueOf=function(){return this.value},m.prototype.toString=function(){return p(this.value)};var h=/^[+\-]?((\d+(\.\d*)?)|(\.\d+))$/;m.cast=function(e){if(e instanceof m)return e;if(e instanceof a||e instanceof r){if((t=e,p(t).trim()).match(h))return new m(+e);throw new i("FORG0001")}var t;if(e instanceof s)return new m(1*e);if(e.primitiveKind==u.PRIMITIVE_FLOAT||e.primitiveKind==u.PRIMITIVE_DOUBLE){if(!c(e)&&l(e))return new m(+e);throw new i("FOCA0002","Cannot convert '"+e+"' to xs:decimal")}throw new i("XPTY0004","Casting value '"+e+"' to xs:decimal can never succeed")},e.exports=m}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(6),a=n(4),s=n(3),u=t.String;function f(e,t,n,i,o){this.scheme=e,this.authority=t,this.path=n,this.query=i,this.fragment=o}f.prototype=new a,f.prototype.builtInKind=o.ANYURI_DT,f.prototype.primitiveKind=r.PRIMITIVE_ANYURI,f.prototype.scheme=null,f.prototype.authority=null,f.prototype.path=null,f.prototype.query=null,f.prototype.fragment=null,f.prototype.toString=function(){return(this.scheme?this.scheme+":":"")+(this.authority?"//"+this.authority:"")+(this.path?this.path:"")+(this.query?"?"+this.query:"")+(this.fragment?"#"+this.fragment:"")};var c=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;f.cast=function(e){if(e instanceof f)return e;if(e instanceof s||e instanceof cXSUntypedAtomic){var t;if(t=(n=e,u(n).trim()).match(c))return new f(t[2],t[4],t[5],t[7],t[9]);throw new i("FORG0001")}var n;throw new i("XPTY0004","Casting value '"+e+"' to xs:anyURI can never succeed")},e.exports=f}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(6),a=n(4),s=n(10),u=n(3),f=n(11),c=t.String;function l(e,t,n,i,o){this.year=e,this.month=t,this.day=n,this.timezone=i,this.negative=o}l.prototype=new a,l.prototype.builtInKind=o.DATE_DT,l.prototype.primitiveKind=r.PRIMITIVE_DATE,l.prototype.year=null,l.prototype.month=null,l.prototype.day=null,l.prototype.timezone=null,l.prototype.negative=null,l.prototype.toString=function(){return f.getDateComponent(this)+f.getTZComponent(this)};var p=/^(-?)([1-9]\d\d\d+|0\d\d\d)-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;l.cast=function(e){if(e instanceof l)return e;if(e instanceof u||e instanceof s){var t=(a=e,c(a).trim()).match(p);if(t){var n=+t[2],o=+t[3],r=+t[4];if(r-1<f.getDaysForYearMonth(n,o))return new l(n,o,r,t[5]?"Z"==t[5]?0:("-"==t[6]?-1:1)*(60*t[7]+1*t[8]):null,"-"==t[1]);throw new i("FORG0001","Invalid date '"+e+"' (Non-existent date)")}throw new i("FORG0001")}var a;if(e instanceof f)return new l(e.year,e.month,e.day,e.timezone,e.negative);throw new i("XPTY0004","Casting value '"+e+"' to xs:date can never succeed")},e.exports=l}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(6),a=n(4),s=n(10),u=n(7),f=n(3),c=t.String;function l(e){this.value=e}l.prototype=new a,l.prototype.builtInKind=o.DOUBLE_DT,l.prototype.primitiveKind=r.PRIMITIVE_DOUBLE,l.prototype.value=null,l.prototype.valueOf=function(){return this.value},l.prototype.toString=function(){return c(this.value)};var p=/^([+\-]?((\d+(\.\d*)?)|(\.\d+))([eE][+\-]?\d+)?|(-?INF)|NaN)$/;l.cast=function(e){if(e instanceof l)return e;if(e instanceof f||e instanceof s){var t=(n=e,c(n).trim()).match(p);if(t)return new l(t[7]?+t[7].replace("INF","Infinity"):+e);throw new i("FORG0001")}var n;if(e instanceof u)return new l(1*e);if(e.primitiveKind==r.PRIMITIVE_DECIMAL||e.primitiveKind==r.PRIMITIVE_FLOAT)return new l(e.value);throw new i("XPTY0004","Casting value '"+e+"' to xs:double can never succeed")},e.exports=l}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(6),a=n(4),s=n(10),u=n(3),f=n(11),c=t.String;function l(e,t,n,i){this.hours=e,this.minutes=t,this.seconds=n,this.timezone=i}l.prototype=new a,l.prototype.builtInKind=o.TIME_DT,l.prototype.primitiveKind=r.PRIMITIVE_TIME,l.prototype.hours=null,l.prototype.minutes=null,l.prototype.seconds=null,l.prototype.timezone=null,l.prototype.toString=function(){return f.getTimeComponent(this)+f.getTZComponent(this)};var p=/^(([01]\d|2[0-3]):([0-5]\d):([0-5]\d)(?:\.(\d+))?|(24:00:00)(?:\.(0+))?)(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;l.cast=function(e){if(e instanceof l)return e;if(e instanceof u||e instanceof s){var t=(o=e,c(o).trim()).match(p);if(t){var n=!!t[6];return new l(n?0:+t[2],n?0:+t[3],+((n?0:t[4])+"."+(n?0:t[5]||0)),t[8]?"Z"==t[8]?0:("-"==t[9]?-1:1)*(60*t[10]+1*t[11]):null)}throw new i("FORG0001")}var o;if(e instanceof f)return new l(e.hours,e.minutes,e.seconds,e.timezone);throw new i("XPTY0004","Casting value '"+e+"' to xs:time can never succeed")},e.exports=l}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(6),a=n(4),s=n(3),u=t.String;function f(e,t,n,i,o,r,a){this.year=e,this.month=t,this.day=n,this.hours=i,this.minutes=o,this.seconds=r,this.negative=a}f.prototype=new a,f.prototype.builtInKind=o.DURATION_DT,f.prototype.primitiveKind=r.PRIMITIVE_DURATION,f.prototype.year=null,f.prototype.month=null,f.prototype.day=null,f.prototype.hours=null,f.prototype.minutes=null,f.prototype.seconds=null,f.prototype.negative=null,f.prototype.toString=function(){return(this.negative?"-":"")+"P"+(f.getYearMonthComponent(this)+f.getDayTimeComponent(this)||"T0S")};var c=/^(-)?P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:((?:(?:[0-9]+(?:.[0-9]*)?)|(?:.[0-9]+)))S)?)?$/;f.cast=function(e){if(e instanceof f)return e;if(e.builtInKind==o.XT_YEARMONTHDURATION_DT)return new f(e.year,e.month,0,0,0,0,e.negative);if(e.builtInKind==o.XT_DAYTIMEDURATION_DT)return new f(0,0,e.day,e.hours,e.minutes,e.seconds,e.negative);if(e instanceof s||e instanceof cXSUntypedAtomic){var t=(r=e,u(r).trim()).match(c);if(t)return n=new f(+t[2]||0,+t[3]||0,+t[4]||0,+t[5]||0,+t[6]||0,+t[7]||0,"-"==t[1]),f.normalizeYearMonthDuration(f.normalizeDayTimeDuration(n));throw new i("FORG0001")}var n,r;throw new i("XPTY0004","Casting value '"+e+"' to xs:duration can never succeed")},f.getYearMonthComponent=function(e){return(e.year?e.year+"Y":"")+(e.month?e.month+"M":"")},f.getDayTimeComponent=function(e){return(e.day?e.day+"D":"")+(e.hours||e.minutes||e.seconds?"T"+(e.hours?e.hours+"H":"")+(e.minutes?e.minutes+"M":"")+(e.seconds?e.seconds+"S":""):"")},f.normalizeDayTimeDuration=function(e){return e.seconds>=60&&(e.minutes+=~~(e.seconds/60),e.seconds%=60),e.minutes>=60&&(e.hours+=~~(e.minutes/60),e.minutes%=60),e.hours>=24&&(e.day+=~~(e.hours/24),e.hours%=24),e},f.normalizeYearMonthDuration=function(e){return e.month>=12&&(e.year+=~~(e.month/12),e.month%=12),e},e.exports=f}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(19),a=n(3),s=t.String;function u(e,t,n){r.call(this,e,t,0,0,0,0,n)}u.prototype=new r,u.prototype.builtInKind=o.XT_YEARMONTHDURATION_DT,u.prototype.toString=function(){return(this.negative?"-":"")+"P"+(r.getYearMonthComponent(this)||"0M")};var f=/^(-)?P(?:([0-9]+)Y)?(?:([0-9]+)M)?$/;u.cast=function(e){if(e instanceof u)return e;if(e instanceof a||e instanceof cXSUntypedAtomic){var t=(n=e,s(n).trim()).match(f);if(t)return r.normalizeYearMonthDuration(new u(+t[2]||0,+t[3]||0,"-"==t[1]));throw new i("FORG0001")}var n;if(e.builtInKind==o.XT_DAYTIMEDURATION_DT)return new u(0,0);if(e instanceof r)return new u(e.year,e.month,e.negative);throw new i("XPTY0004","Casting value '"+e+"' to xs:yearMonthDuration can never succeed")},e.exports=u}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(6),a=n(4),s=n(3),u=t.String;function f(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}f.prototype=new a,f.prototype.builtInKind=o.QNAME_DT,f.prototype.primitiveKind=r.PRIMITIVE_QNAME,f.prototype.prefix=null,f.prototype.localName=null,f.prototype.namespaceURI=null,f.prototype.toString=function(){return(this.prefix?this.prefix+":":"")+this.localName};var c=/^(?:(?![0-9-])(\w[\w.-]*)\:)?(?![0-9-])(\w[\w.-]*)$/;f.cast=function(e){if(e instanceof f)return e;if(e instanceof s||e instanceof cXSUntypedAtomic){var t=(n=e,u(n).trim()).match(c);if(t)return new f(t[1]||null,t[2],null);throw new i("FORG0001")}var n;throw new i("XPTY0004","Casting value '"+e+"' to xs:QName can never succeed")},e.exports=f}).call(this,n(2))},function(e,t,n){(function(t){var i=n(1),o=n(43),r=t.String;function a(e){this.value=e}a.prototype=new o,a.prototype.builtInKind=i.NCNAME_DT,a.cast=function(e){return new a(r(e))},e.exports=a}).call(this,n(2))},function(e,t,n){(function(t){var i=n(1),o=n(44),r=t.String;function a(e){this.value=e}a.prototype=new o,a.prototype.builtInKind=i.TOKEN_DT,a.cast=function(e){return new a(r(e))},e.exports=a}).call(this,n(2))},function(e,t,n){var i=n(0),o=n(1),r=n(5);function a(e){this.value=e}a.prototype=new r,a.prototype.builtInKind=o.NONNEGATIVEINTEGER_DT,a.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value>=0)return new a(t.value);throw new i("FORG0001")},e.exports=a},function(e,t,n){var i=n(1);function o(){}o.prototype.builtInKind=i.ANYTYPE_DT,e.exports=o},function(e,t,n){var i=n(0),o=n(1),r=n(6),a=n(4);function s(){}s.prototype=new a,s.prototype.builtInKind=o.NOTATION_DT,s.prototype.primitiveKind=r.PRIMITIVE_NOTATION,s.cast=function(e){throw new i("XPST0017","Abstract type used in constructor function xs:NOTATION")},e.exports=s},function(e,t,n){var i=n(0),o=n(8),r=n(9),a=n(16),s=n(18),u=n(11),f=n(20),c=n(13),l=n(10),p=n(4);function m(e){this.left=e,this.items=[]}m.prototype.left=null,m.prototype.items=null,m.operators={},m.operators["+"]=function(e,t,n){var o="",l=!1;if(p.isNumeric(e)?p.isNumeric(t)&&(o="numeric-add"):e instanceof a?t instanceof f?o="add-yearMonthDuration-to-date":t instanceof c&&(o="add-dayTimeDuration-to-date"):e instanceof f?t instanceof a?(o="add-yearMonthDuration-to-date",l=!0):t instanceof u?(o="add-yearMonthDuration-to-dateTime",l=!0):t instanceof f&&(o="add-yearMonthDurations"):e instanceof c?t instanceof a?(o="add-dayTimeDuration-to-date",l=!0):t instanceof s?(o="add-dayTimeDuration-to-time",l=!0):t instanceof u?(o="add-dayTimeDuration-to-dateTime",l=!0):t instanceof c&&(o="add-dayTimeDurations"):e instanceof s?t instanceof c&&(o="add-dayTimeDuration-to-time"):e instanceof u&&(t instanceof f?o="add-yearMonthDuration-to-dateTime":t instanceof c&&(o="add-dayTimeDuration-to-dateTime")),o)return r.operators[o].call(n,l?t:e,l?e:t);throw new i("XPTY0004","Arithmetic operator is not defined for provided arguments")},m.operators["-"]=function(e,t,n){var o="";if(p.isNumeric(e)?p.isNumeric(t)&&(o="numeric-subtract"):e instanceof a?t instanceof a?o="subtract-dates":t instanceof f?o="subtract-yearMonthDuration-from-date":t instanceof c&&(o="subtract-dayTimeDuration-from-date"):e instanceof s?t instanceof s?o="subtract-times":t instanceof c&&(o="subtract-dayTimeDuration-from-time"):e instanceof u?t instanceof u?o="subtract-dateTimes":t instanceof f?o="subtract-yearMonthDuration-from-dateTime":t instanceof c&&(o="subtract-dayTimeDuration-from-dateTime"):e instanceof f?t instanceof f&&(o="subtract-yearMonthDurations"):e instanceof c&&t instanceof c&&(o="subtract-dayTimeDurations"),o)return r.operators[o].call(n,e,t);throw new i("XPTY0004","Arithmetic operator is not defined for provided arguments")},m.prototype.evaluate=function(e){var t=o.atomize(this.left.evaluate(e),e);if(!t.length)return[];o.assertSequenceCardinality(t,e,"?","first operand of '"+this.items[0][0]+"'");var n=t[0];n instanceof l&&(n=cXSDouble.cast(n));for(var i,r,a=0,s=this.items.length;a<s;a++){if(!(i=o.atomize(this.items[a][1].evaluate(e),e)).length)return[];o.assertSequenceCardinality(i,e,"?","first operand of '"+this.items[a][0]+"'"),(r=i[0])instanceof l&&(r=cXSDouble.cast(r)),n=m.operators[this.items[a][0]](n,r,e)}return[n]},e.exports=m},function(e,t){e.exports=function(){}},function(e,t,n){var i=n(12);function o(){}o.prototype=new i,e.exports=o},function(e,t,n){var i=n(0),o=n(8),r=n(9),a=n(10),s=n(20),u=n(13),f=n(4);function c(e){this.left=e,this.items=[]}c.prototype.left=null,c.prototype.items=null,c.operators={},c.operators["*"]=function(e,t,n){var o="",a=!1;if(f.isNumeric(e)?f.isNumeric(t)?o="numeric-multiply":t instanceof s?(o="multiply-yearMonthDuration",a=!0):t instanceof u&&(o="multiply-dayTimeDuration",a=!0):e instanceof s?f.isNumeric(t)&&(o="multiply-yearMonthDuration"):e instanceof u&&f.isNumeric(t)&&(o="multiply-dayTimeDuration"),o)return r.operators[o].call(n,a?t:e,a?e:t);throw new i("XPTY0004","Arithmetic operator is not defined for provided arguments")},c.operators.div=function(e,t,n){var o="";if(f.isNumeric(e)?f.isNumeric(t)&&(o="numeric-divide"):e instanceof s?f.isNumeric(t)?o="divide-yearMonthDuration":t instanceof s&&(o="divide-yearMonthDuration-by-yearMonthDuration"):e instanceof u&&(f.isNumeric(t)?o="divide-dayTimeDuration":t instanceof u&&(o="divide-dayTimeDuration-by-dayTimeDuration")),o)return r.operators[o].call(n,e,t);throw new i("XPTY0004","Arithmetic operator is not defined for provided arguments")},c.operators.idiv=function(e,t,n){if(f.isNumeric(e)&&f.isNumeric(t))return r.operators["numeric-integer-divide"].call(n,e,t);throw new i("XPTY0004","Arithmetic operator is not defined for provided arguments")},c.operators.mod=function(e,t,n){if(f.isNumeric(e)&&f.isNumeric(t))return r.operators["numeric-mod"].call(n,e,t);throw new i("XPTY0004","Arithmetic operator is not defined for provided arguments")},c.prototype.evaluate=function(e){var t=o.atomize(this.left.evaluate(e),e);if(!t.length)return[];o.assertSequenceCardinality(t,e,"?","first operand of '"+this.items[0][0]+"'");var n=t[0];n instanceof a&&(n=cXSDouble.cast(n));for(var i,r,s=0,u=this.items.length;s<u;s++){if(!(i=o.atomize(this.items[s][1].evaluate(e),e)).length)return[];o.assertSequenceCardinality(i,e,"?","second operand of '"+this.items[s][0]+"'"),(r=i[0])instanceof a&&(r=cXSDouble.cast(r)),n=c.operators[this.items[s][0]](n,r,e)}return[n]},e.exports=c},function(e,t,n){var i=n(0),o=n(8),r=n(9),a=n(4),s=n(7),u=n(5),f=n(3),c=n(15),l=n(11),p=n(16),m=n(18),h=n(21),d=n(32),y=n(33),v=n(26),w=n(10),T=n(19),g=n(13),D=n(20),S=n(34),x=n(35),I=n(36),N=n(37),O=n(38),E=n(12);function M(e,t,n){this.left=e,this.right=t,this.operator=n}function b(e,t){var n=o.atomize(e.left.evaluate(t),t);if(!n.length)return new s(!1);var i=o.atomize(e.right.evaluate(t),t);if(!i.length)return new s(!1);for(var a,u,l=!1,p=0,m=n.length;p<m&&!l;p++)for(var h,d,y=0,v=i.length;y<v&&!l;y++)u=n[p],h=(d=i[y])instanceof w,(a=u instanceof w)&&h?(u=f.cast(u),d=f.cast(d)):(a?d instanceof g?u=g.cast(u):d instanceof D?u=D.cast(u):d.primitiveKind&&(u=r.dataTypes[d.primitiveKind].cast(u)):h&&(u instanceof g?d=g.cast(d):u instanceof D?d=D.cast(d):u.primitiveKind&&(d=r.dataTypes[u.primitiveKind].cast(d))),u instanceof c&&(u=f.cast(u)),d instanceof c&&(d=f.cast(d))),l=A[P[e.operator]](u,d,t).valueOf();return new s(l)}M.prototype.left=null,M.prototype.right=null,M.prototype.operator=null,M.prototype.evaluate=function(e){var t=M.operators[this.operator](this,e);return null==t?[]:[t]};var P={"=":"eq","!=":"ne",">":"gt","<":"lt",">=":"ge","<=":"le"};function F(e,t){var n=o.atomize(e.left.evaluate(t),t);if(!n.length)return null;o.assertSequenceCardinality(n,t,"?","first operand of '"+e.operator+"'");var i=o.atomize(e.right.evaluate(t),t);if(!i.length)return null;o.assertSequenceCardinality(i,t,"?","second operand of '"+e.operator+"'");var r=n[0],a=i[0];return r instanceof w&&(r=f.cast(r)),a instanceof w&&(a=f.cast(a)),r instanceof c&&(r=f.cast(r)),a instanceof c&&(a=f.cast(a)),A[e.operator](r,a,t)}var A={};function R(e,t){var n=e.left.evaluate(t);if(!n.length)return null;o.assertSequenceCardinality(n,t,"?","first operand of '"+e.operator+"'"),o.assertSequenceItemType(n,t,E,"first operand of '"+e.operator+"'");var i=e.right.evaluate(t);return i.length?(o.assertSequenceCardinality(i,t,"?","second operand of '"+e.operator+"'"),o.assertSequenceItemType(i,t,E,"second operand of '"+e.operator+"'"),X[e.operator](n[0],i[0],t)):null}A.eq=function(e,t,n){var o="";if(a.isNumeric(e))a.isNumeric(t)&&(o="numeric-equal");else if(e instanceof s)t instanceof s&&(o="boolean-equal");else if(e instanceof f){if(t instanceof f)return r.operators["numeric-equal"].call(n,r.functions.compare.call(n,e,t),new u(0))}else e instanceof p?t instanceof p&&(o="date-equal"):e instanceof m?t instanceof m&&(o="time-equal"):e instanceof l?t instanceof l&&(o="dateTime-equal"):e instanceof T?t instanceof T&&(o="duration-equal"):e instanceof S?t instanceof S&&(o="gYearMonth-equal"):e instanceof x?t instanceof x&&(o="gYear-equal"):e instanceof N?t instanceof N&&(o="gMonthDay-equal"):e instanceof I?t instanceof I&&(o="gMonth-equal"):e instanceof O?t instanceof O&&(o="gDay-equal"):e instanceof h?t instanceof h&&(o="QName-equal"):e instanceof d?t instanceof d&&(o="hexBinary-equal"):e instanceof y?t instanceof y&&(o="base64Binary-equal"):e instanceof v&&t instanceof v&&(o="NOTATION-equal");if(o)return r.operators[o].call(n,e,t);throw new i("XPTY0004","Cannot compare values of given types")},A.ne=function(e,t,n){return new s(!A.eq(e,t,n).valueOf())},A.gt=function(e,t,n){var o="";if(a.isNumeric(e))a.isNumeric(t)&&(o="numeric-greater-than");else if(e instanceof s)t instanceof s&&(o="boolean-greater-than");else if(e instanceof f){if(t instanceof f)return r.operators["numeric-greater-than"].call(n,r.functions.compare.call(n,e,t),new u(0))}else e instanceof p?t instanceof p&&(o="date-greater-than"):e instanceof m?t instanceof m&&(o="time-greater-than"):e instanceof l?t instanceof l&&(o="dateTime-greater-than"):e instanceof D?t instanceof D&&(o="yearMonthDuration-greater-than"):e instanceof g&&t instanceof g&&(o="dayTimeDuration-greater-than");if(o)return r.operators[o].call(n,e,t);throw new i("XPTY0004","Cannot compare values of given types")},A.lt=function(e,t,n){var o="";if(a.isNumeric(e))a.isNumeric(t)&&(o="numeric-less-than");else if(e instanceof s)t instanceof s&&(o="boolean-less-than");else if(e instanceof f){if(t instanceof f)return r.operators["numeric-less-than"].call(n,r.functions.compare.call(n,e,t),new u(0))}else e instanceof p?t instanceof p&&(o="date-less-than"):e instanceof m?t instanceof m&&(o="time-less-than"):e instanceof l?t instanceof l&&(o="dateTime-less-than"):e instanceof D?t instanceof D&&(o="yearMonthDuration-less-than"):e instanceof g&&t instanceof g&&(o="dayTimeDuration-less-than");if(o)return r.operators[o].call(n,e,t);throw new i("XPTY0004","Cannot compare values of given types")},A.ge=function(e,t,n){var o="";if(a.isNumeric(e))a.isNumeric(t)&&(o="numeric-less-than");else if(e instanceof s)t instanceof s&&(o="boolean-less-than");else if(e instanceof f){if(t instanceof f)return r.operators["numeric-greater-than"].call(n,r.functions.compare.call(n,e,t),new u(-1))}else e instanceof p?t instanceof p&&(o="date-less-than"):e instanceof m?t instanceof m&&(o="time-less-than"):e instanceof l?t instanceof l&&(o="dateTime-less-than"):e instanceof D?t instanceof D&&(o="yearMonthDuration-less-than"):e instanceof g&&t instanceof g&&(o="dayTimeDuration-less-than");if(o)return new s(!r.operators[o].call(n,e,t).valueOf());throw new i("XPTY0004","Cannot compare values of given types")},A.le=function(e,t,n){var o="";if(a.isNumeric(e))a.isNumeric(t)&&(o="numeric-greater-than");else if(e instanceof s)t instanceof s&&(o="boolean-greater-than");else if(e instanceof f){if(t instanceof f)return r.operators["numeric-less-than"].call(n,r.functions.compare.call(n,e,t),new u(1))}else e instanceof p?t instanceof p&&(o="date-greater-than"):e instanceof m?t instanceof m&&(o="time-greater-than"):e instanceof l?t instanceof l&&(o="dateTime-greater-than"):e instanceof D?t instanceof D&&(o="yearMonthDuration-greater-than"):e instanceof g&&t instanceof g&&(o="dayTimeDuration-greater-than");if(o)return new s(!r.operators[o].call(n,e,t).valueOf());throw new i("XPTY0004","Cannot compare values of given types")};var X={is:function(e,t,n){return r.operators["is-same-node"].call(n,e,t)},">>":function(e,t,n){return r.operators["node-after"].call(n,e,t)},"<<":function(e,t,n){return r.operators["node-before"].call(n,e,t)}};M.operators={"=":b,"!=":b,"<":b,"<=":b,">":b,">=":b,eq:F,ne:F,lt:F,le:F,gt:F,ge:F,is:R,">>":R,"<<":R},M.vcOperators=A,e.exports=M},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(6),a=n(4),s=n(3),u=t.atob,f=t.String;function c(e){this.value=e}c.prototype=new a,c.prototype.builtInKind=o.HEXBINARY_DT,c.prototype.primitiveKind=r.PRIMITIVE_HEXBINARY,c.prototype.value=null,c.prototype.valueOf=function(){return this.value},c.prototype.toString=function(){return this.value};var l=/^([0-9a-fA-F]{2})*$/;c.cast=function(e){if(e instanceof c)return e;if(e instanceof s||e instanceof cXSUntypedAtomic){var t=function(e){return f(e).trim()}(e).match(l);if(t)return new c(t[0].toUpperCase());throw new i("FORG0001")}if(e instanceof cXSBase64Binary){for(var n,o=u(e.valueOf()),r=[],a=0,p=o.length;a<p;a++)n=o.charCodeAt(a).toString(16),r.push(new cArray(3-n.length).join("0")+n);return new c(r.join(""))}throw new i("XPTY0004","Casting value '"+e+"' to xs:hexBinary can never succeed")},e.exports=c}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(6),a=n(4),s=n(3),u=t.btoa,f=t.parseInt,c=t.String;function l(e){this.value=e}l.prototype=new a,l.prototype.builtInKind=o.BASE64BINARY_DT,l.prototype.primitiveKind=r.PRIMITIVE_BASE64BINARY,l.prototype.value=null,l.prototype.valueOf=function(){return this.value},l.prototype.toString=function(){return this.value};var p=/^((([A-Za-z0-9+\/]\s*){4})*(([A-Za-z0-9+\/]\s*){3}[A-Za-z0-9+\/]|([A-Za-z0-9+\/]\s*){2}[AEIMQUYcgkosw048]\s*=|[A-Za-z0-9+\/]\s*[AQgw]\s*=\s*=))?$/;l.cast=function(e){if(e instanceof l)return e;if(e instanceof s||e instanceof cXSUntypedAtomic){if(n=(t=e,c(t).trim()).match(p))return new l(n[0]);throw new i("FORG0001")}var t;if(e instanceof cXSHexBinary){for(var n,o=[],r=0,a=(n=e.valueOf().match(/.{2}/g)).length;r<a;r++)o.push(c.fromCharCode(f(n[r],16)));return new l(u(o.join("")))}throw new i("XPTY0004","Casting value '"+e+"' to xs:hexBinary can never succeed")},e.exports=l}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(6),a=n(4),s=n(3),u=n(11),f=t.String;function c(e,t,n){this.year=e,this.month=t,this.timezone=n}c.prototype=new a,c.prototype.builtInKind=o.GYEARMONTH_DT,c.prototype.primitiveKind=r.PRIMITIVE_GYEARMONTH,c.prototype.year=null,c.prototype.month=null,c.prototype.timezone=null,c.prototype.toString=function(){return u.pad(this.year)+"-"+u.pad(this.month)+u.getTZComponent(this)};var l=/^-?([1-9]\d\d\d+|0\d\d\d)-(0[1-9]|1[0-2])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;c.cast=function(e){if(e instanceof c)return e;if(e instanceof s||e instanceof cXSUntypedAtomic){var t=(n=e,f(n).trim()).match(l);if(t)return new c(+t[1],+t[2],t[3]?"Z"==t[3]?0:("-"==t[4]?-1:1)*(60*t[5]+1*t[6]):null);throw new i("FORG0001")}var n;if(e instanceof cXSDate||e instanceof u)return new c(e.year,e.month,e.timezone);throw new i("XPTY0004","Casting value '"+e+"' to xs:gYearMonth can never succeed")},e.exports=c}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(6),a=n(4),s=n(3),u=n(11),f=t.String;function c(e,t){this.year=e,this.timezone=t}c.prototype=new a,c.prototype.builtInKind=o.GYEAR_DT,c.prototype.primitiveKind=r.PRIMITIVE_GYEAR,c.prototype.year=null,c.prototype.timezone=null,c.prototype.toString=function(){return u.pad(this.year)+u.getTZComponent(this)};var l=/^-?([1-9]\d\d\d+|0\d\d\d)(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;c.cast=function(e){if(e instanceof c)return e;if(e instanceof s||e instanceof cXSUntypedAtomic){var t=(n=e,f(n).trim()).match(l);if(t)return new c(+t[1],t[2]?"Z"==t[2]?0:("-"==t[3]?-1:1)*(60*t[4]+1*t[5]):null);throw new i("FORG0001")}var n;if(e instanceof cXSDate||e instanceof u)return new c(e.year,e.timezone);throw new i("XPTY0004","Casting value '"+e+"' to xs:gYear can never succeed")},e.exports=c}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(6),a=n(4),s=n(3),u=n(11),f=t.String;function c(e,t){this.month=e,this.timezone=t}c.prototype=new a,c.prototype.builtInKind=o.GMONTH_DT,c.prototype.primitiveKind=r.PRIMITIVE_GMONTH,c.prototype.month=null,c.prototype.timezone=null,c.prototype.toString=function(){return"--"+u.pad(this.month)+u.getTZComponent(this)};var l=/^--(0[1-9]|1[0-2])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;c.cast=function(e){if(e instanceof c)return e;if(e instanceof s||e instanceof cXSUntypedAtomic){var t=(n=e,f(n).trim()).match(l);if(t)return new c(+t[1],t[2]?"Z"==t[2]?0:("-"==t[3]?-1:1)*(60*t[4]+1*t[5]):null);throw new i("FORG0001")}var n;if(e instanceof cXSDate||e instanceof u)return new c(e.month,e.timezone);throw new i("XPTY0004","Casting value '"+e+"' to xs:gMonth can never succeed")},e.exports=c}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(6),a=n(4),s=n(3),u=n(11),f=t.String;function c(e,t,n){this.month=e,this.day=t,this.timezone=n}c.prototype=new a,c.prototype.builtInKind=o.GMONTHDAY_DT,c.prototype.primitiveKind=r.PRIMITIVE_GMONTHDAY,c.prototype.month=null,c.prototype.day=null,c.prototype.timezone=null,c.prototype.toString=function(){return"--"+u.pad(this.month)+"-"+u.pad(this.day)+u.getTZComponent(this)};var l=/^--(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;c.cast=function(e){if(e instanceof c)return e;if(e instanceof s||e instanceof cXSUntypedAtomic){var t=(r=e,f(r).trim()).match(l);if(t){var n=+t[1],o=+t[2];if(o-1<u.getDaysForYearMonth(1976,n))return new c(n,o,t[3]?"Z"==t[3]?0:("-"==t[4]?-1:1)*(60*t[5]+1*t[6]):null);throw new i("FORG0001","Invalid date '"+e+"' (Non-existent date)")}throw new i("FORG0001")}var r;if(e instanceof cXSDate||e instanceof u)return new c(e.month,e.day,e.timezone);throw new i("XPTY0004","Casting value '"+e+"' to xs:gMonthDay can never succeed")},e.exports=c}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(6),a=n(4),s=n(3),u=n(11),f=t.String;function c(e,t){this.day=e,this.timezone=t}c.prototype=new a,c.prototype.builtInKind=o.GDAY_DT,c.prototype.primitiveKind=r.PRIMITIVE_GDAY,c.prototype.day=null,c.prototype.timezone=null,c.prototype.toString=function(){return"---"+u.pad(this.day)+u.getTZComponent(this)};var l=/^---(0[1-9]|[12]\d|3[01])(Z|([+\-])(0\d|1[0-4]):([0-5]\d))?$/;c.cast=function(e){if(e instanceof c)return e;if(e instanceof s||e instanceof cXSUntypedAtomic){var t=(n=e,f(n).trim()).match(l);if(t)return new c(+t[1],t[2]?"Z"==t[2]?0:("-"==t[3]?-1:1)*(60*t[4]+1*t[5]):null);throw new i("FORG0001")}var n;if(e instanceof cXSDate||e instanceof u)return new c(e.day,e.timezone);throw new i("XPTY0004","Casting value '"+e+"' to xs:gDay can never succeed")},e.exports=c}).call(this,n(2))},function(e,t){function n(e){this.name=e,this.args=[]}n.prototype.name=null,n.prototype.args=null,n.names={},n.names["document-node"]={},n.names.element={},n.names.attribute={},n.names["processing-instruction"]={},n.names.comment={},n.names.text={},n.names.node={},n.names["schema-element"]={},n.names["schema-attribute"]={},n.prototype.test=function(e,t){var n,i=t.DOMAdapter.getProperty,o=t.DOMAdapter.isNode(e)?i(e,"nodeType"):0;switch(this.name){case"node":return!!o;case"attribute":if(2!=o)return!1;break;case"document-node":return 9==o;case"element":return 1==o;case"processing-instruction":if(7!=o)return!1;break;case"comment":return 8==o;case"text":return 3==o||4==o;case"schema-attribute":throw"KindTest 'schema-attribute' not implemented";case"schema-element":throw"KindTest 'schema-element' not implemented"}return 2==o?"xmlns"!=i(e,"prefix")&&"xmlns"!=i(e,"localName"):7!=o||(n=i(e,"nodeName"),this.args.length?n==this.args[0].value:"xml"!=n)},e.exports=n},function(e,t,n){var i=n(8),o=n(4);function r(){}r.prototype.predicates=null,r.prototype.applyPredicates=function(e,t){for(var n,r=t.item,a=t.position,s=t.size,u=0,f=this.predicates.length;u<f;u++){n=e,e=[];for(var c,l=0,p=n.length;l<p;l++)t.item=n[l],t.position=l+1,t.size=p,1==(c=this.predicates[u].evaluate(t)).length&&o.isNumeric(c[0])?c[0].valueOf()==l+1&&e.push(n[l]):i.toEBV(c,t)&&e.push(n[l])}return t.item=r,t.position=a,t.size=s,e},e.exports=r},function(e,t){function n(){}n.prototype.value=null,n.prototype.evaluate=function(e){return[this.value]},e.exports=n},function(e,t,n){(function(t){var n=t.Math;function i(){}i.prototype.isNode=function(e){return e&&!!e.nodeType},i.prototype.getProperty=function(e,t){return e[t]},i.prototype.isSameNode=function(e,t){return e==t},i.prototype.compareDocumentPosition=function(e,t){if("compareDocumentPosition"in e)return e.compareDocumentPosition(t);if(t==e)return 0;var i,o,r,a,s,u=null,f=null;if(2==this.getProperty(e,"nodeType")&&(u=e,e=this.getProperty(u,"ownerElement")),2==this.getProperty(t,"nodeType")&&(f=t,t=this.getProperty(f,"ownerElement")),u&&f&&e&&e==t)for(a=0,s=(i=this.getProperty(e,"attributes")).length;a<s;a++){if((o=i[a])==u)return 36;if(o==f)return 34}var c,l,p,m,h=[],d=[];for(u&&h.push(u),r=e;r;r=this.getProperty(r,"parentNode"))h.push(r);for(f&&d.push(f),r=t;r;r=this.getProperty(r,"parentNode"))d.push(r);if((this.getProperty(e,"ownerDocument")||e)!=(this.getProperty(t,"ownerDocument")||t)||h[h.length-1]!=d[d.length-1])return 33;for(a=n.min(c=h.length,p=d.length);a;--a)if((l=h[--c])!=(m=d[--p])){if(2==this.getProperty(l,"nodeType"))return 4;if(2==this.getProperty(m,"nodeType"))return 2;if(!this.getProperty(m,"nextSibling"))return 4;if(!this.getProperty(l,"nextSibling"))return 2;for(r=this.getProperty(m,"previousSibling");r;r=this.getProperty(r,"previousSibling"))if(r==l)return 4;return 2}return c<p?20:10},i.prototype.lookupNamespaceURI=function(e,t){if("lookupNamespaceURI"in e)return e.lookupNamespaceURI(t);for(;e&&9!=this.getProperty(e,"nodeType");e=this.getProperty(e,"parentNode")){if(t==this.getProperty(e,"prefix"))return this.getProperty(e,"namespaceURI");if(1==this.getProperty(e,"nodeType"))for(var n=this.getProperty(e,"attributes"),i=0,o=n.length,r="xmlns:"+t;i<o;i++)if(this.getProperty(n[i],"nodeName")==r)return this.getProperty(n[i],"value")}return null},i.prototype.getElementById=function(e,t){return e.getElementById(t)},i.prototype.getElementsByTagNameNS=function(e,t,n){if("getElementsByTagNameNS"in e)return e.getElementsByTagNameNS(t,n);var i=[],o="*"==t,r="*"==n;return function(e){for(var a,s=0,u=this.getProperty(e,"childNodes");a=u[s];s++)1==this.getProperty(a,"nodeType")&&(!r&&n!=this.getProperty(a,"localName")||!o&&t!=this.getProperty(a,"namespaceURI")||(i[i.length]=a),this.getProperty(a,"firstChild")&&arguments.callee(a))}(e),i},e.exports=i}).call(this,n(2))},function(e,t,n){(function(t){var i=n(1),o=n(23),r=t.String;function a(e){this.value=e}a.prototype=new o,a.prototype.builtInKind=i.NAME_DT,a.cast=function(e){return new a(r(e))},e.exports=a}).call(this,n(2))},function(e,t,n){(function(t){var i=n(1),o=n(3),r=t.String;function a(e){this.value=e}a.prototype=new o,a.prototype.builtInKind=i.NORMALIZEDSTRING_DT,a.cast=function(e){return new a(r(e))},e.exports=a}).call(this,n(2))},function(e,t,n){var i=n(0),o=n(1),r=(i=n(0),n(46)),a=n(5);function s(e){this.value=e}s.prototype=new r,s.prototype.builtInKind=o.SHORT_DT,s.cast=function(e){var t;try{t=a.cast(e)}catch(e){throw e}if(t.value<=32767&&t.value>=-32768)return new s(t.value);throw new i("FORG0001")},e.exports=s},function(e,t,n){var i=n(0),o=n(1),r=n(5),a=n(47);function s(e){this.value=e}s.prototype=new a,s.prototype.builtInKind=o.INT_DT,s.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value<=2147483647&&t.value>=-2147483648)return new s(t.value);throw new i("FORG0001")},e.exports=s},function(e,t,n){var i=n(0),o=n(1),r=n(5);function a(e){this.value=e}a.prototype=new r,a.prototype.builtInKind=o.LONG_DT,a.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value<=0x8000000000000000&&t.value>=-0x8000000000000000)return new a(t.value);throw new i("FORG0001")},e.exports=a},function(e,t,n){var i=n(0),o=n(1),r=n(5);function a(e){this.value=e}a.prototype=new r,a.prototype.builtInKind=o.NONPOSITIVEINTEGER_DT,a.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value<=0)return new a(t.value);throw new i("FORG0001")},e.exports=a},function(e,t,n){var i=n(0),o=n(1),r=n(5),a=n(50);function s(e){this.value=e}s.prototype=new a,s.prototype.builtInKind=o.UNSIGNEDSHORT_DT,s.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value>=1&&t.value<=65535)return new s(t.value);throw new i("FORG0001")},e.exports=s},function(e,t,n){var i=n(0),o=n(1),r=n(5),a=n(24);function s(e){this.value=e}s.prototype=new a,s.prototype.builtInKind=o.UNSIGNEDINT_DT,s.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value>=1&&t.value<=4294967295)return new s(t.value);throw new i("FORG0001")},e.exports=s},function(e,t,n){(function(t){var i=n(52),o=n(42),r=n(9),a=n(90),s=n(4),u=n(3),f=n(17),c=n(14),l=n(7),p=n(5);n(91),n(104),n(113);var m=t.Object,h=t.isNaN,d=t.isFinite,y=new r,v=new o;function w(e,t){if("string"!=typeof e)throw"Missing or inappropriate type of the expression parameter";if(!(t instanceof a))throw"Missing or inappropriate type of the dynamic context parameter";for(var n,o=function(e,t){return new i(e,t)}(e,t.staticContext).evaluate(t),r=[],s=0,u=o.length;s<u;s++)r[r.length]=t.DOMAdapter.isNode(n=o[s])?n:D(n);return r}function T(e,t,n,i){e||(e=y),void 0===t&&(t=null),i||(i=v);var o,r={};if("object"==typeof n)for(var s in n)o=n[s],m.hasOwnProperty.call(n,s)&&null!=o&&(r[s]=i.isNode(o)?o:g(o));return new a(e,null==t||i.isNode(t)?t:g(t),r,i)}function g(e){var t;return"boolean"==typeof e?t=l:"number"==typeof e&&(t=h(e)||!d(e)||/e/i.test(e)?f:e%1?c:p),t?new t(e):new u(e.toString())}function D(e){return e=e instanceof l||s.isNumeric(e)?e.valueOf():e.toString()}e.exports={execute:w,evaluate:function(e,t,n,i,o){return w(e,T("function"==typeof n?new r(n):n,t,i,o))},createStaticContext:function(e,t){return new r(e,t)},createDynamicContext:T,js2xs:g,xs2js:D,defaultDOMAdapter:v,defaultStaticContext:y}}).call(this,n(2))},function(e,t,n){var i=n(53),o=n(0),r=n(54);function a(e,t){var n=new i(e),a=r(n,t);if(!n.eof())throw new o("XPST0003","Unexpected token beyond end of query");if(!a)throw new o("XPST0003","Expected expression");this.internalExpression=a}a.prototype.internalExpression=null,a.prototype.evaluate=function(e){return this.internalExpression.evaluate(e)},e.exports=a},function(e,t,n){var i=n(0);function o(e){var t=e.match(/\$?(?:(?![0-9-])(?:\w[\w.-]*|\*):)?(?![0-9-])(?:\w[\w.-]*|\*)|\(:|:\)|\/\/|\.\.|::|\d+(?:\.\d*)?(?:[eE][+-]?\d+)?|\.\d+(?:[eE][+-]?\d+)?|"[^"]*(?:""[^"]*)*"|'[^']*(?:''[^']*)*'|<<|>>|[!<>]=|(?![0-9-])[\w-]+:\*|\s+|./g);if(t){for(var n=0,o=0,r=t.length;o<r;o++)"(:"==t[o]?n++:":)"==t[o]&&n?n--:n||/^\s/.test(t[o])||(this[this.length++]=t[o]);if(n)throw new i("XPST0003","Unclosed comment")}}o.prototype.index=0,o.prototype.length=0,o.prototype.reset=function(){this.index=0},o.prototype.peek=function(e){return this[this.index+(e||0)]||""},o.prototype.next=function(e){return(this.index+=e||1)<this.length},o.prototype.back=function(e){return(this.index-=e||1)>0},o.prototype.eof=function(){return this.index>=this.length},e.exports=o},function(e,t,n){var i=n(0),o=n(9),r=n(3),a=n(17),s=n(14),u=n(5),f=n(55),c=n(27),l=n(30),p=n(61),m=n(31),h=n(62),d=n(63),y=n(64),v=n(65),w=n(66),T=n(39),g=n(67),D=n(68),S=n(69),x=n(70),I=n(71),N=n(72),O=n(73),E=n(74),M=n(75),b=n(76),P=n(77),F=n(78),A=n(79),R=n(80),X=n(81),Y=n(82),_=n(83),z=n(84),C=n(85),U=n(86),q=n(87),k=n(88),G=n(89),K=/^(?:(?![0-9-])(\w[\w.-]*|\*)\:)?(?![0-9-])(\w[\w.-]*|\*)$/;function B(e,t){var n;if(!e.eof()&&(n=V(e,t))){var o=new f;for(o.items.push(n);","==e.peek();){if(e.next(),e.eof()||!(n=V(e,t)))throw new i("XPST0003","Expected expression");o.items.push(n)}return o}}function V(e,t){return function(e,t){var n,o,r;if("if"==e.peek()&&"("==e.peek(1)){if(e.next(2),e.eof()||!(n=B(e,t)))throw new i("XPST0003","Expected if statement operand in conditional expression");if(")"!=e.peek())throw new i("XPST0003","Expected ')' token in for expression");if(e.next(),"then"!=e.peek())throw new i("XPST0003","Expected 'then' token in conditional if expression");if(e.next(),e.eof()||!(o=V(e,t)))throw new i("XPST0003","Expected then statement operand in conditional expression");if("else"!=e.peek())throw new i("XPST0003","Expected 'else' token in conditional if expression");if(e.next(),e.eof()||!(r=V(e,t)))throw new i("XPST0003","Expected else statement operand in conditional expression");return new y(n,o,r)}}(e,t)||function(e,t){if("for"==e.peek()&&"$"==e.peek(1).substr(0,1)){e.next();var n,o=new h;do{o.bindings.push(Q(e,t))}while(","==e.peek()&&e.next());if("return"!=e.peek())throw new i("XPST0003","Expected 'return' token in for expression");if(e.next(),e.eof()||!(n=V(e,t)))throw new i("XPST0003","Expected return statement operand in for expression");return o.returnExpr=n,o}}(e,t)||function(e,t){var n=e.peek();if(("some"==n||"every"==n)&&"$"==e.peek(1).substr(0,1)){e.next();var o,r=new P(n);do{r.bindings.push(ae(e,t))}while(","==e.peek()&&e.next());if("satisfies"!=e.peek())throw new i("XPST0003","Expected 'satisfies' token in quantified expression");if(e.next(),e.eof()||!(o=V(e,t)))throw new i("XPST0003","Expected satisfies statement operand in quantified expression");return r.satisfiesExpr=o,r}}(e,t)||function(e,t){var n;if(e.eof()||!(n=$(e,t)))return;if("or"!=e.peek())return n;var o=new w(n);for(;"or"==e.peek();){if(e.next(),e.eof()||!(n=$(e,t)))throw new i("XPST0003","Expected second operand in logical expression");o.items.push(n)}return o}(e,t)}function L(e,t){var n;if(!e.eof()&&(n=H(e,t))){if(!(e.peek()in c.operators))return n;for(var o,r=new c(n);(o=e.peek())in c.operators;){if(e.next(),e.eof()||!(n=H(e,t)))throw new i("XPST0003","Expected second operand in additive expression");r.items.push([o,n])}return r}}function H(e,t){var n;if(!e.eof()&&(n=fe(e,t))){if(!(e.peek()in l.operators))return n;for(var o,r=new l(n);(o=e.peek())in l.operators;){if(e.next(),e.eof()||!(n=fe(e,t)))throw new i("XPST0003","Expected second operand in multiplicative expression");r.items.push([o,n])}return r}}function j(e,t){return function(e,t){if(e.eof())return;var n,r=new S,a=e.peek();"//"!=a&&"/"!=a||(e.next(),r.items.push(new N(null,"root",o.NS_XPF)),"//"==a&&r.items.push(new D("descendant-or-self",new T("node"))));if(e.eof()||!(n=te(e,t))){if("/"==a)return r.items[0];if("//"==a)throw new i("XPST0003","Expected path step expression");return}r.items.push(n);for(;"/"==(a=e.peek())||"//"==a;){if("//"==a&&r.items.push(new D("descendant-or-self",new T("node"))),e.next(),e.eof()||!(n=te(e,t)))throw new i("XPST0003","Expected path step expression");r.items.push(n)}return 1==r.items.length?r.items[0]:r}(e,t)}function Z(e,t){var n,o;if(!e.eof()&&(n=ue(e,t))){if(!(e.peek()in m.operators))return n;var r=e.peek();if(e.next(),e.eof()||!(o=ue(e,t)))throw new i("XPST0003","Expected second operand in comparison expression");return new m(n,o,r)}}function Q(e,t){var n,o=e.peek().substr(1).match(K);if(!o)throw new i("XPST0003","Expected binding in for expression");if("*"==o[1]||"*"==o[2])throw new i("XPST0003","Illegal use of wildcard in for expression binding variable name");if(e.next(),"in"!=e.peek())throw new i("XPST0003","Expected 'in' token in for expression binding");if(e.next(),e.eof()||!(n=V(e,t)))throw new i("XPST0003","Expected in statement operand in for expression binding");return new d(o[1]||null,o[2],o[1]?t.getURIForPrefix(o[1]):null,n)}function $(e,t){var n;if(!e.eof()&&(n=Z(e,t))){if("and"!=e.peek())return n;for(var o=new v(n);"and"==e.peek();){if(e.next(),e.eof()||!(n=Z(e,t)))throw new i("XPST0003","Expected second operand in logical expression");o.items.push(n)}return o}}function W(e,t){var n,o=e.peek();if("("==e.peek(1)){if(!(o in T.names))throw new i("XPST0003","Unknown '"+o+"' kind test");e.next(2);var a=new T(o);if(")"!=e.peek())"document-node"==o||"element"==o||"attribute"==o||"processing-instruction"==o&&((n=re(e,t))||(n=new M(new r(e.peek())),e.next()),a.args.push(n));else{if("schema-attribute"==o)throw new i("XPST0003","Expected attribute declaration in 'schema-attribute' kind test");if("schema-element"==o)throw new i("XPST0003","Expected element declaration in 'schema-element' kind test")}if(")"!=e.peek())throw new i("XPST0003","Expected ')' token in kind test");return e.next(),a}}function J(e,t){if(!e.eof())return W(e,t)||function(e,t){var n=e.peek().match(K);if(n){if("*"==n[1]&&"*"==n[2])throw new i("XPST0003","Illegal use of *:* wildcard in name test");return e.next(),new g(n[1]||null,n[2],n[1]?"*"==n[1]?"*":t.getURIForPrefix(n[1])||null:t.defaultElementNamespace)}}(e,t)}function ee(e,t){var n,o,r=e.peek();if("::"==e.peek(1)){if(!(r in D.axises))throw new i("XPST0003","Unknown axis name: "+r);if(e.next(2),e.eof()||!(n=J(e,t)))throw new i("XPST0003","Expected node test expression in axis step");o=new D(r,n)}else if(".."==r)e.next(),o=new D("parent",new T("node"));else if("@"==r){if(e.next(),e.eof()||!(n=J(e,t)))throw new i("XPST0003","Expected node test expression in axis step");o=new D("attribute",n)}else{if(e.eof()||!(n=J(e,t)))return;o=new D(n instanceof T&&"attribute"==n.name?"attribute":"child",n)}return ne(e,t,o),o}function te(e,t){if(!e.eof())return function(e,t){var n;if(e.eof()||!(n=function(e,t){if(!e.eof())return function(e,t){if("."==e.peek())return e.next(),new x}(e)||function(e,t){if("("==e.peek()){e.next();var n=null;if(")"!=e.peek()&&(n=B(e,t)),")"!=e.peek())throw new i("XPST0003","Expected ')' token in parenthesized expression");return e.next(),new E(n)}}(e,t)||function(e,t){var n=e.peek().match(K);if(n&&"("==e.peek(1)){if(!n[1]&&n[2]in T.names)return ee(e,t);if("*"==n[1]||"*"==n[2])throw new i("XPST0003","Illegal use of wildcard in function name");var o,r=new N(n[1]||null,n[2],n[1]?t.getURIForPrefix(n[1])||null:t.defaultFunctionNamespace);if(e.next(2),")"!=e.peek()){do{if(e.eof()||!(o=V(e,t)))throw new i("XPST0003","Expected function call argument");r.args.push(o)}while(","==e.peek()&&e.next());if(")"!=e.peek())throw new i("XPST0003","Expected ')' token in function call")}return e.next(),r}}(e,t)||function(e,t){if("$"==e.peek().substr(0,1)){var n=e.peek().substr(1).match(K);if(n){if("*"==n[1]||"*"==n[2])throw new i("XPST0003","Illegal use of wildcard in var expression variable name");var o=new b(n[1]||null,n[2],n[1]?t.getURIForPrefix(n[1]):null);return e.next(),o}}}(e,t)||function(e,t){if(!e.eof())return function(e,t){var n=e.peek(),i=n.match(ie);if(i){var o=u;return i[5]?o=a:(i[2]||i[3])&&(o=s),e.next(),new O(new o(+n))}}(e)||re(e,t)}(e,t)}(e,t)))return;var o=new I(n);return ne(e,t,o),0==o.predicates.length?o.expression:o}(e,t)||ee(e,t)}function ne(e,t,n){for(var o;"["==e.peek();){if(e.next(),e.eof()||!(o=B(e,t)))throw new i("XPST0003","Expected expression in predicate");if(n.predicates.push(o),"]"!=e.peek())throw new i("XPST0003","Expected ']' token in predicate");e.next()}}var ie=/^[+-]?(?:(?:(\d+)(?:\.(\d*))?)|(?:\.(\d+)))(?:[eE]([+-])?(\d+))?$/;var oe=/^'([^']*(?:''[^']*)*)'|"([^"]*(?:""[^"]*)*)"$/;function re(e,t){var n=e.peek().match(oe);if(n)return e.next(),new M(new r(n[1]?n[1].replace("''","'"):n[2]?n[2].replace('""','"'):""))}function ae(e,t){var n,o=e.peek().substr(1).match(K);if(!o)throw new i("XPST0003","Expected binding in quantified expression");if("*"==o[1]||"*"==o[2])throw new i("XPST0003","Illegal use of wildcard in quantified expression binding variable name");if(e.next(),"in"!=e.peek())throw new i("XPST0003","Expected 'in' token in quantified expression binding");if(e.next(),e.eof()||!(n=V(e,t)))throw new i("XPST0003","Expected in statement operand in quantified expression binding");return new F(o[1]||null,o[2],o[1]?t.getURIForPrefix(o[1]):null,n)}function se(e,t){var n,o;if(!e.eof()&&(n=he(e,t))){if("intersect"!=(o=e.peek())&&"except"!=o)return n;for(var r=new A(n);"intersect"==(o=e.peek())||"except"==o;){if(e.next(),e.eof()||!(n=he(e,t)))throw new i("XPST0003","Expected second operand in "+o+" expression");r.items.push([o,n])}return r}}function ue(e,t){var n,o;if(!e.eof()&&(n=L(e,t))){if("to"!=e.peek())return n;if(e.next(),e.eof()||!(o=L(e,t)))throw new i("XPST0003","Expected second operand in range expression");return new R(n,o)}}function fe(e,t){var n,o;if(!e.eof()&&(n=se(e,t))){if("|"!=(o=e.peek())&&"union"!=o)return n;for(var r=new X(n);"|"==(o=e.peek())||"union"==o;){if(e.next(),e.eof()||!(n=se(e,t)))throw new i("XPST0003","Expected second operand in union expression");r.items.push(n)}return r}}function ce(e,t){var n=e.peek().match(K);if(n){if("*"==n[1]||"*"==n[2])throw new i("XPST0003","Illegal use of wildcard in type name");return e.next(),new Y(n[1]||null,n[2],n[1]?t.getURIForPrefix(n[1]):null)}}function le(e,t){if(!e.eof()){if("empty-sequence"==e.peek()&&"("==e.peek(1)){if(e.next(2),")"!=e.peek())throw new i("XPST0003","Expected ')' token in sequence type");return e.next(),new z}var n,o;return!e.eof()&&(n=function(e,t){if(!e.eof()){var n;if("item"==e.peek()&&"("==e.peek(1)){if(e.next(2),")"!=e.peek())throw new i("XPST0003","Expected ')' token in item type expression");return e.next(),new _}return(n=W(e,t))||(n=ce(e,t))?new _(n):void 0}}(e,t))?("?"==(o=e.peek())||"*"==o||"+"==o?e.next():o=null,new z(n,o)):void 0}}function pe(e,t){var n,i;if(!e.eof()&&(n=ce(e,t)))return"?"==(i=e.peek())?e.next():i=null,new C(n,i)}function me(e,t){var n,o;if(!e.eof()&&(n=function(e,t){var n,o;if(e.eof()||!(n=function(e,t){if(!e.eof()){if(!(e.peek()in p.operators))return j(e,t);for(var n,o="+";e.peek()in p.operators;)"-"==e.peek()&&(o="-"==o?"+":"-"),e.next();if(e.eof()||!(n=j(e,t)))throw new i("XPST0003","Expected operand in unary expression");return new p(o,n)}}(e,t)))return;if("cast"!=e.peek()||"as"!=e.peek(1))return n;if(e.next(2),e.eof()||!(o=pe(e,t)))throw new i("XPST0003","Expected second operand in cast expression");return new q(n,o)}(e,t))){if("castable"!=e.peek()||"as"!=e.peek(1))return n;if(e.next(2),e.eof()||!(o=pe(e,t)))throw new i("XPST0003","Expected second operand in castable expression");return new U(n,o)}}function he(e,t){var n,o;if(!e.eof()&&(n=function(e,t){var n,o;if(e.eof()||!(n=me(e,t)))return;if("treat"!=e.peek()||"as"!=e.peek(1))return n;if(e.next(2),e.eof()||!(o=le(e,t)))throw new i("XPST0003","Expected second operand in treat expression");return new G(n,o)}(e,t))){if("instance"!=e.peek()||"of"!=e.peek(1))return n;if(e.next(2),e.eof()||!(o=le(e,t)))throw new i("XPST0003","Expected second operand in instance of expression");return new k(n,o)}}e.exports=B},function(e,t,n){var i=n(9);function o(){this.items=[]}o.prototype.items=null,o.prototype.evaluate=function(e){for(var t=[],n=0,o=this.items.length;n<o;n++)t=i.operators.concatenate.call(e,t,this.items[n].evaluate(e));return t},e.exports=o},function(e,t,n){var i=n(12);function o(){}o.prototype=new i,e.exports=o},function(e,t,n){var i=n(12);function o(){}o.prototype=new i,e.exports=o},function(e,t,n){var i=n(12);function o(){}o.prototype=new i,e.exports=o},function(e,t,n){var i=n(12);function o(){}o.prototype=new i,e.exports=o},function(e,t,n){var i=n(12);function o(){}o.prototype=new i,e.exports=o},function(e,t,n){var i=n(0),o=n(8),r=n(9),a=n(4),s=n(10);function u(e,t){this.operator=e,this.expression=t}u.prototype.operator=null,u.prototype.expression=null,u.operators={},u.operators["-"]=function(e,t){if(a.isNumeric(e))return r.operators["numeric-unary-minus"].call(t,e);throw new i("XPTY0004","Arithmetic operator is not defined for provided arguments")},u.operators["+"]=function(e,t){if(a.isNumeric(e))return r.operators["numeric-unary-plus"].call(t,e);throw new i("XPTY0004","Arithmetic operator is not defined for provided arguments")},u.prototype.evaluate=function(e){var t=o.atomize(this.expression.evaluate(e),e);if(!t.length)return[];o.assertSequenceCardinality(t,e,"?","second operand of '"+this.operator+"'");var n=t[0];return n instanceof s&&(n=cXSDouble.cast(n)),[u.operators[this.operator](n,e)]},e.exports=u},function(e,t){function n(){this.bindings=[],this.returnExpr=null}n.prototype.bindings=null,n.prototype.returnExpr=null,n.prototype.evaluate=function(e){var t=[];return function(n,i){for(var o=n.bindings[i++],r=o.inExpr.evaluate(e),a=(o.namespaceURI?"{"+o.namespaceURI+"}":"")+o.localName,s=0,u=r.length;s<u;s++)e.pushVariable(a,r[s]),i<n.bindings.length?arguments.callee(n,i):t=t.concat(n.returnExpr.evaluate(e)),e.popVariable(a)}(this,0),t},e.exports=n},function(e,t){function n(e,t,n,i){this.prefix=e,this.localName=t,this.namespaceURI=n,this.inExpr=i}n.prototype.prefix=null,n.prototype.localName=null,n.prototype.namespaceURI=null,n.prototype.inExpr=null,e.exports=n},function(e,t,n){var i=n(8);function o(e,t,n){this.condExpr=e,this.thenExpr=t,this.elseExpr=n}o.prototype.condExpr=null,o.prototype.thenExpr=null,o.prototype.elseExpr=null,o.prototype.evaluate=function(e){return this[i.toEBV(this.condExpr.evaluate(e),e)?"thenExpr":"elseExpr"].evaluate(e)},e.exports=o},function(e,t,n){var i=n(8),o=n(7);function r(e){this.left=e,this.items=[]}r.prototype.left=null,r.prototype.items=null,r.prototype.evaluate=function(e){for(var t=i.toEBV(this.left.evaluate(e),e),n=0,r=this.items.length;n<r&&t;n++)t=i.toEBV(this.items[n].evaluate(e),e);return[new o(t)]},e.exports=r},function(e,t,n){var i=n(8),o=n(7);function r(e){this.left=e,this.items=[]}r.prototype.left=null,r.prototype.items=null,r.prototype.evaluate=function(e){for(var t=i.toEBV(this.left.evaluate(e),e),n=0,r=this.items.length;n<r&&!t;n++)t=i.toEBV(this.items[n].evaluate(e),e);return[new o(t)]},e.exports=r},function(e,t){function n(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}n.prototype.prefix=null,n.prototype.localName=null,n.prototype.namespaceURI=null,n.prototype.test=function(e,t){var n=t.DOMAdapter.getProperty,i=n(e,"nodeType");if(1==i||2==i){if("*"==this.localName)return(1==i||"xmlns"!=n(e,"prefix")&&"xmlns"!=n(e,"localName"))&&(!this.prefix||n(e,"namespaceURI")==this.namespaceURI);if(this.localName==n(e,"localName"))return"*"==this.namespaceURI||2==i&&!this.prefix&&!n(e,"prefix")||n(e,"namespaceURI")==this.namespaceURI}return!1},e.exports=n},function(e,t,n){var i=n(0),o=n(40),r=n(39);function a(e,t){this.axis=e,this.test=t,this.predicates=[]}function s(e,t,n){for(var i;e;e=n(e,"nextSibling"))t.push(e),(i=n(e,"firstChild"))&&s(i,t,n)}function u(e,t,n){for(var i;e;e=n(e,"previousSibling"))(i=n(e,"lastChild"))&&u(i,t,n),t.push(e)}a.prototype=new o,a.prototype.axis=null,a.prototype.test=null,a.axises={},a.axises.attribute={},a.axises.child={},a.axises.descendant={},a.axises["descendant-or-self"]={},a.axises.following={},a.axises["following-sibling"]={},a.axises.self={},a.axises.ancestor={},a.axises["ancestor-or-self"]={},a.axises.parent={},a.axises.preceding={},a.axises["preceding-sibling"]={},a.prototype.evaluate=function(e){var t=e.item;if(!e.DOMAdapter.isNode(t))throw new i("XPTY0020");var n=[],o=e.DOMAdapter.getProperty,a=o(t,"nodeType");switch(this.axis){case"attribute":if(1==a)for(var f=o(t,"attributes"),c=0,l=f.length;c<l;c++)n.push(f[c]);break;case"child":for(var p=o(t,"firstChild");p;p=o(p,"nextSibling"))n.push(p);break;case"descendant-or-self":n.push(t);case"descendant":s(o(t,"firstChild"),n,o);break;case"following":for(var m=t;m;m=o(m,"parentNode"))(h=o(m,"nextSibling"))&&s(h,n,o);break;case"following-sibling":for(p=t;p=o(p,"nextSibling");)n.push(p);break;case"self":n.push(t);break;case"ancestor-or-self":n.push(t);case"ancestor":for(p=2==a?o(t,"ownerElement"):t;p=o(p,"parentNode");)n.push(p);break;case"parent":(m=o(t,2==a?"ownerElement":"parentNode"))&&n.push(m);break;case"preceding":var h;for(m=t;m;m=o(m,"parentNode"))(h=o(m,"previousSibling"))&&u(h,n,o);break;case"preceding-sibling":for(p=t;p=o(p,"previousSibling");)n.push(p)}if(n.length&&!(this.test instanceof r&&"node"==this.test.name)){var d=n;n=[];for(c=0,l=d.length;c<l;c++)this.test.test(d[c],e)&&n.push(d[c])}switch(n.length&&this.predicates.length&&(n=this.applyPredicates(n,e)),this.axis){case"ancestor":case"ancestor-or-self":case"parent":case"preceding":case"preceding-sibling":n.reverse()}return n},e.exports=a},function(e,t,n){var i=n(0),o=n(8);function r(){this.items=[]}r.prototype.items=null,r.prototype.evaluate=function(e){for(var t,n,r,a=e.item,s=[a],u=0,f=this.items.length;u<f;u++){t=[];for(var c=0,l=s.length;c<l;c++){e.item=s[c];for(var p=0,m=this.items[u].evaluate(e),h=m.length;p<h;p++){if(u<f-1&&!e.DOMAdapter.isNode(m[p]))throw new i("XPTY0019");-1==(n=t,r=m[p],n.indexOf(r))&&t.push(m[p])}}s=t}return e.item=a,o.order(s,e)},e.exports=r},function(e,t,n){var i=n(0);function o(){}o.prototype.evaluate=function(e){if(null==e.item)throw new i("XPDY0002","Dynamic context does not have context item initialized");return[e.item]},e.exports=o},function(e,t,n){var i=n(40);function o(e){this.expression=e,this.predicates=[]}o.prototype=new i,o.prototype.expression=null,o.prototype.evaluate=function(e){var t=this.expression.evaluate(e);return this.predicates.length&&t.length&&(t=this.applyPredicates(t,e)),t},e.exports=o},function(e,t,n){(function(t){var i=n(0),o=n(8),r=n(9),a=n(4),s=t.Array;function u(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n,this.args=[]}u.prototype.prefix=null,u.prototype.localName=null,u.prototype.namespaceURI=null,u.prototype.args=null,u.prototype.evaluate=function(e){for(var t,n,o=[],u=0,f=this.args.length;u<f;u++)o.push(this.args[u].evaluate(e));var l=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName;if(this.namespaceURI==r.NS_XPF){var p;if(n=r.functions[this.localName])return(t=r.signatures[this.localName])&&c(this.localName,t,o,e),null==(p=n.apply(e,o))?[]:p instanceof s?p:[p];throw new i("XPST0017","Unknown system function: "+l+"()")}if(this.namespaceURI==r.NS_XSD){if((n=r.dataTypes[this.localName])&&"NOTATION"!=this.localName&&"anyAtomicType"!=this.localName)return c(this.localName,[[a,"?"]],o,e),null===o[0]?[]:[n.cast(o[0])];throw new i("XPST0017","Unknown type constructor function: "+l+"()")}if(n=e.staticContext.getFunction(l))return null==(p=n.apply(e,o))?[]:p instanceof s?p:[p];throw new i("XPST0017","Unknown user function: "+l+"()")};var f=["first","second","third","fourth","fifth"];function c(e,t,n,r){for(var a,s,u=n.length,c=t.length,l=0;l<t.length&&!t[l][2];)l++;if(u>c)throw new i("XPST0017","Function "+e+"() must have "+(c?" no more than ":"")+c+" argument"+(c>1||!c?"s":""));if(u<l)throw new i("XPST0017","Function "+e+"() must have "+(l==c?"exactly":"at least")+" "+l+" argument"+(c>1?"s":""));for(var p=0;p<u;p++)s=t[p],a=n[p],o.assertSequenceCardinality(a,r,s[1],f[p]+" argument of "+e+"()"),o.assertSequenceItemType(a,r,s[0],f[p]+" argument of "+e+"()"),"+"!=s[1]&&"*"!=s[1]&&(n[p]=a.length?a[0]:null)}e.exports=u}).call(this,n(2))},function(e,t,n){var i=n(41);function o(e){this.value=e}o.prototype=new i,e.exports=o},function(e,t){function n(e){this.expression=e}n.prototype.evaluate=function(e){return this.expression?this.expression.evaluate(e):[]},e.exports=n},function(e,t,n){var i=n(41);function o(e){this.value=e}o.prototype=new i,e.exports=o},function(e,t,n){var i=n(0);function o(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}o.prototype.prefix=null,o.prototype.localName=null,o.prototype.namespaceURI=null,o.prototype.evaluate=function(e){var t=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName;if(e.scope.hasOwnProperty(t))return[e.scope[t]];throw new i("XPST0008","Variable $"+(this.prefix?this.prefix+":":"")+this.localName+" has not been declared")},e.exports=o},function(e,t,n){var i=n(7),o=n(8);function r(e){this.quantifier=e,this.bindings=[],this.satisfiesExpr=null}r.prototype.bindings=null,r.prototype.quantifier=null,r.prototype.satisfiesExpr=null,r.prototype.evaluate=function(e){var t="every"==this.quantifier,n=!!t;return function(i,r){for(var a=i.bindings[r++],s=a.inExpr.evaluate(e),u=(a.namespaceURI?"{"+a.namespaceURI+"}":"")+a.localName,f=0,c=s.length;f<c&&(t?n:!n);f++)e.pushVariable(u,s[f]),r<i.bindings.length?arguments.callee(i,r):n=o.toEBV(i.satisfiesExpr.evaluate(e),e),e.popVariable(u)}(this,0),[new i(n)]},e.exports=r},function(e,t){function n(e,t,n,i){this.prefix=e,this.localName=t,this.namespaceURI=n,this.inExpr=i}n.prototype.prefix=null,n.prototype.localName=null,n.prototype.namespaceURI=null,n.prototype.inExpr=null,e.exports=n},function(e,t,n){var i=n(9);function o(e){this.left=e,this.items=[]}o.prototype.left=null,o.prototype.items=null,o.prototype.evaluate=function(e){for(var t,n=this.left.evaluate(e),o=0,r=this.items.length;o<r;o++)n=i.operators[(t=this.items[o])[0]].call(e,n,t[1].evaluate(e));return n},e.exports=o},function(e,t,n){n(0);var i=n(8),o=n(9),r=n(5);function a(e,t){this.left=e,this.right=t}a.prototype.left=null,a.prototype.right=null,a.prototype.evaluate=function(e){var t=this.left.evaluate(e);if(!t.length)return[];var n="first operand of 'to'";i.assertSequenceCardinality(t,e,"?",n),i.assertSequenceItemType(t,e,r,n);var a=this.right.evaluate(e);return a.length?(n="second operand of 'to'",i.assertSequenceCardinality(a,e,"?",n),i.assertSequenceItemType(a,e,r,n),o.operators.to.call(e,t[0],a[0])):[]},e.exports=a},function(e,t,n){var i=n(9);function o(e){this.left=e,this.items=[]}o.prototype.left=null,o.prototype.items=null,o.prototype.evaluate=function(e){for(var t=this.left.evaluate(e),n=0,o=this.items.length;n<o;n++)t=i.operators.union.call(e,t,this.items[n].evaluate(e));return t},e.exports=o},function(e,t,n){var i=n(9),o=n(0);function r(e,t,n){this.prefix=e,this.localName=t,this.namespaceURI=n}r.prototype.prefix=null,r.prototype.localName=null,r.prototype.namespaceURI=null,r.prototype.test=function(e,t){var n=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName,r=this.namespaceURI==i.NS_XSD?i.dataTypes[this.localName]:t.staticContext.getDataType(n);if(r)return e instanceof r;throw new o("XPST0051","Unknown simple type "+(this.prefix?this.prefix+":":"")+this.localName)},r.prototype.cast=function(e,t){var n=(this.namespaceURI?"{"+this.namespaceURI+"}":"")+this.localName,r=this.namespaceURI==i.NS_XSD?i.dataTypes[this.localName]:t.staticContext.getDataType(n);if(r)return r.cast(e);throw new o("XPST0051","Unknown atomic type "+(this.prefix?this.prefix+":":"")+this.localName)},e.exports=r},function(e,t){function n(e){this.test=e}n.prototype.test=null,e.exports=n},function(e,t){function n(e,t){this.itemType=e||null,this.occurence=t||null}n.prototype.itemType=null,n.prototype.occurence=null,e.exports=n},function(e,t){function n(e,t){this.itemType=e||null,this.occurence=t||null}n.prototype.itemType=null,n.prototype.occurence=null,e.exports=n},function(e,t,n){var i=n(0),o=n(8),r=n(7);function a(e,t){this.expression=e,this.type=t}a.prototype.expression=null,a.prototype.type=null,a.prototype.evaluate=function(e){var t=this.expression.evaluate(e),n=this.type.itemType,a=this.type.occurence;if(t.length>1)return[new r(!1)];if(!t.length)return[new r("?"==a)];try{n.cast(o.atomize(t,e)[0])}catch(e){if(!e.code)throw e;if("XPST0051"==e.code)throw e;if("XPST0017"==e.code)throw new i("XPST0080","No value is castable to "+(n.prefix?n.prefix+":":"")+n.localName);return[new r(!1)]}return[new r(!0)]},e.exports=a},function(e,t,n){var i=n(8);function o(e,t){this.expression=e,this.type=t}o.prototype.expression=null,o.prototype.type=null,o.prototype.evaluate=function(e){var t=this.expression.evaluate(e);return i.assertSequenceCardinality(t,e,this.type.occurence,"'cast as' expression operand"),t.length?[this.type.itemType.cast(i.atomize(t,e)[0],e)]:[]},e.exports=o},function(e,t,n){var i=n(7);function o(e,t){this.expression=e,this.type=t}o.prototype.expression=null,o.prototype.type=null,o.prototype.evaluate=function(e){var t=this.expression.evaluate(e),n=this.type.itemType,o=this.type.occurence;if(!n)return[new i(!t.length)];if(!t.length)return[new i("?"==o||"*"==o)];if(1!=t.length&&"+"!=o&&"*"!=o)return[new i(!1)];if(!n.test)return[new i(!0)];for(var r=!0,a=0,s=t.length;a<s&&r;a++)r=n.test.test(t[a],e);return[new i(r)]},e.exports=o},function(e,t,n){var i=n(0);function o(e,t){this.expression=e,this.type=t}o.prototype.expression=null,o.prototype.type=null,o.prototype.evaluate=function(e){var t=this.expression.evaluate(e),n=this.type.itemType,o=this.type.occurence;if(!n){if(t.length)throw new i("XPDY0050","The only value allowed for the value in 'treat as' expression is an empty sequence");return t}if("?"!=o&&"*"!=o&&!t.length)throw new i("XPDY0050","An empty sequence is not allowed as the value in 'treat as' expression");if("+"!=o&&"*"!=o&&1!=t.length)throw new i("XPDY0050","A sequence of more than one item is not allowed as the value in 'treat as' expression");if(!n.test)return t;for(var r=0,a=t.length;r<a;r++)if(!n.test.test(t[r],e))throw new i("XPDY0050","Required item type of value in 'treat as' expression is "+(n.test.prefix?n.test.prefix+":":"")+n.test.localName);return t},e.exports=o},function(e,t,n){(function(t){var i=n(42),o=n(11),r=n(13),a=t.Date,s=t.Math;function u(e,t,n,u){this.staticContext=e,this.item=t,this.scope=n||{},this.stack={},this.DOMAdapter=u||new i;var f=new a,c=f.getTimezoneOffset();this.dateTime=new o(f.getFullYear(),f.getMonth()+1,f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds()+f.getMilliseconds()/1e3,-c),this.timezone=new r(0,s.abs(~~(c/60)),s.abs(c%60),0,c>0)}u.prototype.item=null,u.prototype.position=0,u.prototype.size=0,u.prototype.scope=null,u.prototype.stack=null,u.prototype.dateTime=null,u.prototype.timezone=null,u.prototype.staticContext=null,u.prototype.pushVariable=function(e,t){this.stack.hasOwnProperty(e)||(this.stack[e]=[]),this.stack[e].push(this.scope[e]),this.scope[e]=t},u.prototype.popVariable=function(e){this.stack.hasOwnProperty(e)&&(this.scope[e]=this.stack[e].pop(),this.stack[e].length||(delete this.stack[e],void 0===this.scope[e]&&delete this.scope[e]))},e.exports=u}).call(this,n(2))},function(e,t,n){var i=n(9),o=n(92),r=n(93),a=n(94),s=n(95),u=n(96),f=n(97),c=n(98),l=n(99),p=n(100),m=n(101),h=n(103),d=n(4),y=n(3),v=n(16),w=n(18),T=n(11),g=n(19),D=n(13),S=n(21),x=n(17),I=n(5),N=n(28),O=n(12),E=n(29);i.defineSystemFunction("node-name",[[O,"?"]],o.fNodeName),i.defineSystemFunction("nilled",[[O,"?"]],o.fNilled),i.defineSystemFunction("string",[[N,"?",!0]],o.fString),i.defineSystemFunction("data",[[N,"*"]],o.fData),i.defineSystemFunction("base-uri",[[O,"?",!0]],o.fBaseUri),i.defineSystemFunction("document-uri",[[O,"?"]],o.fDocumentUri),i.defineSystemFunction("resolve-uri",[[y,"?"],[y,"",!0]],r.fResolveUri),i.defineSystemFunction("true",[],a.fTrue),i.defineSystemFunction("false",[],a.fFalse),i.defineSystemFunction("not",[[N,"*"]],a.fNot),i.defineSystemFunction("position",[],s.fPosition),i.defineSystemFunction("last",[],s.fLast),i.defineSystemFunction("current-dateTime",[],s.fCurrentDateTime),i.defineSystemFunction("current-date",[],s.fCurrentDate),i.defineSystemFunction("current-time",[],s.fCurrentTime),i.defineSystemFunction("implicit-timezone",[],s.fImplicitTimezone),i.defineSystemFunction("default-collation",[],s.fDefaultCollation),i.defineSystemFunction("static-base-uri",[],s.fStaticBaseUri),i.defineSystemFunction("years-from-duration",[[g,"?"]],u.fYearsFromDuration),i.defineSystemFunction("months-from-duration",[[g,"?"]],u.fMonthsFromDuration),i.defineSystemFunction("days-from-duration",[[g,"?"]],u.fDaysFromDuration),i.defineSystemFunction("hours-from-duration",[[g,"?"]],u.fHoursFromDuration),i.defineSystemFunction("minutes-from-duration",[[g,"?"]],u.fMinutesFromDuration),i.defineSystemFunction("seconds-from-duration",[[g,"?"]],u.fSecondsFromDuration),i.defineSystemFunction("year-from-dateTime",[[T,"?"]],u.fYearFromDateTime),i.defineSystemFunction("month-from-dateTime",[[T,"?"]],u.fMonthFromDateTime),i.defineSystemFunction("day-from-dateTime",[[T,"?"]],u.fDayFromDateTime),i.defineSystemFunction("hours-from-dateTime",[[T,"?"]],u.fHoursFromDateTime),i.defineSystemFunction("minutes-from-dateTime",[[T,"?"]],u.fMinutesFromDateTime),i.defineSystemFunction("seconds-from-dateTime",[[T,"?"]],u.fSecondsFromDateTime),i.defineSystemFunction("timezone-from-dateTime",[[T,"?"]],u.fTimezoneFromDateTime),i.defineSystemFunction("year-from-date",[[v,"?"]],u.fYearFromDate),i.defineSystemFunction("month-from-date",[[v,"?"]],u.fMonthFromDate),i.defineSystemFunction("day-from-date",[[v,"?"]],u.fDayFromDate),i.defineSystemFunction("timezone-from-date",[[v,"?"]],u.fTimezoneFromDate),i.defineSystemFunction("hours-from-time",[[w,"?"]],u.fHoursFromTime),i.defineSystemFunction("minutes-from-time",[[w,"?"]],u.fMinutesFromTime),i.defineSystemFunction("seconds-from-time",[[w,"?"]],u.fSecondsFromTime),i.defineSystemFunction("timezone-from-time",[[w,"?"]],u.fTimezoneFromTime),i.defineSystemFunction("adjust-dateTime-to-timezone",[[T,"?"],[D,"?",!0]],u.fAdjustDateTimeToTimezone),i.defineSystemFunction("adjust-date-to-timezone",[[v,"?"],[D,"?",!0]],u.fAdjustDateToTimezone),i.defineSystemFunction("adjust-time-to-timezone",[[w,"?"],[D,"?",!0]],u.fAdjustTimeToTimezone),i.defineSystemFunction("name",[[O,"?",!0]],f.fName),i.defineSystemFunction("local-name",[[O,"?",!0]],f.fLocalName),i.defineSystemFunction("namespace-uri",[[O,"?",!0]],f.fNamespaceUri),i.defineSystemFunction("number",[[d,"?",!0]],f.fNumber),i.defineSystemFunction("lang",[[y,"?"],[O,"",!0]],f.fLang),i.defineSystemFunction("root",[[O,"?",!0]],f.fRoot),i.defineSystemFunction("abs",[[x,"?"]],c.fAbs),i.defineSystemFunction("ceiling",[[x,"?"]],c.fCeiling),i.defineSystemFunction("floor",[[x,"?"]],c.fFloor),i.defineSystemFunction("round",[[x,"?"]],c.fRound),i.defineSystemFunction("round-half-to-even",[[x,"?"],[I,"",!0]],c.fRoundHalfToEven),i.defineSystemFunction("resolve-QName",[[y,"?"],[E]],l.fResolveQName),i.defineSystemFunction("QName",[[y,"?"],[y]],l.fQName),i.defineSystemFunction("prefix-from-QName",[[S,"?"]],l.fPrefixFromQName),i.defineSystemFunction("local-name-from-QName",[[S,"?"]],l.fLocalNameFromQName),i.defineSystemFunction("namespace-uri-from-QName",[[S,"?"]],l.fNamespaceUriFromQName),i.defineSystemFunction("namespace-uri-for-prefix",[[y,"?"],[E]],l.fNamespaceUriForPrefix),i.defineSystemFunction("in-scope-prefixes",[[E]],l.fInScopePrefixes),i.defineSystemFunction("boolean",[[N,"*"]],p.fBoolean),i.defineSystemFunction("index-of",[[d,"*"],[d],[y,"",!0]],p.fIndexOf),i.defineSystemFunction("empty",[[N,"*"]],p.fEmpty),i.defineSystemFunction("exists",[[N,"*"]],p.fExists),i.defineSystemFunction("distinct-values",[[d,"*"],[y,"",!0]],p.fDistinctValues),i.defineSystemFunction("insert-before",[[N,"*"],[I],[N,"*"]],p.fInsertBefore),i.defineSystemFunction("remove",[[N,"*"],[I]],p.fRemove),i.defineSystemFunction("reverse",[[N,"*"]],p.fReverse),i.defineSystemFunction("subsequence",[[N,"*"],[x,""],[x,"",!0]],p.fSubsequence),i.defineSystemFunction("unordered",[[N,"*"]],p.fUnordered),i.defineSystemFunction("zero-or-one",[[N,"*"]],p.fZeroOrOne),i.defineSystemFunction("one-or-more",[[N,"*"]],p.fOneOrMore),i.defineSystemFunction("exactly-one",[[N,"*"]],p.fExactlyOne),i.defineSystemFunction("deep-equal",[[N,"*"],[N,"*"],[y,"",!0]],p.fDeepEqual),i.defineSystemFunction("count",[[N,"*"]],p.fCount),i.defineSystemFunction("avg",[[d,"*"]],p.fAvg),i.defineSystemFunction("max",[[d,"*"],[y,"",!0]],p.fMax),i.defineSystemFunction("min",[[d,"*"],[y,"",!0]],p.fMin),i.defineSystemFunction("sum",[[d,"*"],[d,"?",!0]],p.fSum),i.defineSystemFunction("id",[[y,"*"],[O,"",!0]],p.fId),i.defineSystemFunction("idref",[[y,"*"],[O,"",!0]],p.fIdref),i.defineSystemFunction("doc",[[y,"?",!0]],p.fDoc),i.defineSystemFunction("doc-available",[[y,"?",!0]],p.fDocAvailable),i.defineSystemFunction("collection",[[y,"?",!0]],p.fCollection),i.defineSystemFunction("element-with-id",[[y,"*"],[O,"",!0]],p.fElementWithId),i.defineSystemFunction("codepoints-to-string",[[I,"*"]],m.fCodepointsToString),i.defineSystemFunction("string-to-codepoints",[[y,"?"]],m.fStringToCodepoints),i.defineSystemFunction("compare",[[y,"?"],[y,"?"],[y,"",!0]],m.fCompare),i.defineSystemFunction("codepoint-equal",[[y,"?"],[y,"?"]],m.fCodepointEqual),i.defineSystemFunction("concat",null,m.fConcat),i.defineSystemFunction("string-join",[[y,"*"],[y]],m.fStringJoin),i.defineSystemFunction("substring",[[y,"?"],[x],[x,"",!0]],m.fSubstring),i.defineSystemFunction("string-length",[[y,"?",!0]],m.fStringLength),i.defineSystemFunction("normalize-space",[[y,"?",!0]],m.fNormalizeSpace),i.defineSystemFunction("normalize-unicode",[[y,"?"],[y,"",!0]],m.fNormalizeUnicode),i.defineSystemFunction("upper-case",[[y,"?"]],m.fUpperCase),i.defineSystemFunction("lower-case",[[y,"?"]],m.fLowerCase),i.defineSystemFunction("translate",[[y,"?"],[y],[y]],m.fTranslate),i.defineSystemFunction("encode-for-uri",[[y,"?"]],m.fEncodeForUri),i.defineSystemFunction("iri-to-uri",[[y,"?"]],m.fIriToUri),i.defineSystemFunction("escape-html-uri",[[y,"?"]],m.fEscapeHtmlUri),i.defineSystemFunction("contains",[[y,"?"],[y,"?"],[y,"",!0]],m.fContains),i.defineSystemFunction("starts-with",[[y,"?"],[y,"?"],[y,"",!0]],m.fStartsWith),i.defineSystemFunction("ends-with",[[y,"?"],[y,"?"],[y,"",!0]],m.fEndsWith),i.defineSystemFunction("substring-before",[[y,"?"],[y,"?"],[y,"",!0]],m.fSubstringBefore),i.defineSystemFunction("substring-after",[[y,"?"],[y,"?"],[y,"",!0]],m.fSubstringAfter),i.defineSystemFunction("matches",[[y,"?"],[y],[y,"",!0]],m.fMatches),i.defineSystemFunction("replace",[[y,"?"],[y],[y],[y,"",!0]],m.fReplace),i.defineSystemFunction("tokenize",[[y,"?"],[y],[y,"",!0]],m.fTokenize),i.defineSystemFunction("trace",[[N,"*"],[y]],h.fTrace)},function(e,t,n){var i=n(0),o=n(8),r=n(7),a=n(15),s=n(3),u=n(21);e.exports={fNodeName:function(e){if(null!=e){var t=this.DOMAdapter.getProperty;switch(t(e,"nodeType")){case 1:case 2:return new u(t(e,"prefix"),t(e,"localName"),t(e,"namespaceURI"));case 5:case 6:throw"Not implemented";case 7:return new u(null,t(e,"nodeName"),null);case 10:return new u(null,t(e,"name"),null)}}return null},fNilled:function(e){return null!=e&&1==this.DOMAdapter.getProperty(e,"nodeType")?new r(!1):null},fString:function(e){if(!arguments.length){if(!this.item)throw new i("XPDY0002");e=this.item}return null==e?new s(""):s.cast(o.atomize([e],this)[0])},fData:function(e){return o.atomize(e,this)},fBaseUri:function(e){if(!arguments.length){if(!this.DOMAdapter.isNode(this.item))throw new i("XPTY0004","base-uri() function called when the context item is not a node");e=this.item}return a.cast(new s(this.DOMAdapter.getProperty(e,"baseURI")||""))},fDocumentUri:function(e){if(null!=e){var t=this.DOMAdapter.getProperty;if(9==t(e,"nodeType"))return a.cast(new s(t(e,"documentURI")||""))}return null}}},function(e,t,n){var i=n(0),o=n(3),r=n(15);e.exports={fResolveUri:function(e,t){if(arguments.length<2){if(!this.DOMAdapter.isNode(this.item))throw new i("XPTY0004","resolve-uri() function called when the context item is not a node");t=new o(this.DOMAdapter.getProperty(this.item,"baseURI")||"")}if(null==e)return null;if(""==e.valueOf()||"#"==e.valueOf().charAt(0))return r.cast(t);var n=r.cast(e);if(n.scheme)return n;var a=r.cast(t);if(n.scheme=a.scheme,!n.authority&&(n.authority=a.authority,"/"!=n.path.charAt(0))){var s=n.path.split("/"),u=a.path.split("/");u.pop();for(var f=""==u[0]?1:0,c=0,l=s.length;c<l;c++)".."==s[c]?u.length>f?u.pop():(u.push(s[c]),f++):"."!=s[c]&&u.push(s[c]);".."!=s[--c]&&"."!=s[c]||u.push(""),n.path=u.join("/")}return n}}},function(e,t,n){var i=n(8),o=n(7);e.exports={fTrue:function(){return new o(!0)},fFalse:function(){return new o(!1)},fNot:function(e){return new o(!i.toEBV(e,this))}}},function(e,t,n){var i=n(16),o=n(18),r=n(5),a=n(15),s=n(3);e.exports={fPosition:function(){return new r(this.position)},fLast:function(){return new r(this.size)},fCurrentDateTime:function(){return this.dateTime},fCurrentDate:function(){return i.cast(this.dateTime)},fCurrentTime:function(){return o.cast(this.dateTime)},fImplicitTimezone:function(){return this.timezone},fDefaultCollation:function(){return new s(this.staticContext.defaultCollationName)},fStaticBaseUri:function(){return a.cast(new s(this.staticContext.baseURI||""))}}},function(e,t,n){(function(t){var i=n(16),o=n(18),r=n(14),a=n(11),s=(n(19),n(13)),u=(i=n(16),n(5)),f=t.Math;function c(e,t){if(null==e)return null;var n=e[t]*(e.negative?-1:1);return"seconds"==t?new r(n):new u(n)}function l(e,t){if(null==e)return null;if("timezone"==t){var n=e.timezone;return null==n?null:new s(0,f.abs(~~(n/60)),f.abs(n%60),0,n<0)}var a=e[t];return e instanceof i||"hours"==t&&24==a&&(a=0),e instanceof o||(a*=e.negative?-1:1),"seconds"==t?new r(a):new u(a)}e.exports={fYearsFromDuration:function(e){return c(e,"year")},fMonthsFromDuration:function(e){return c(e,"month")},fDaysFromDuration:function(e){return c(e,"day")},fHoursFromDuration:function(e){return c(e,"hours")},fMinutesFromDuration:function(e){return c(e,"minutes")},fSecondsFromDuration:function(e){return c(e,"seconds")},fYearFromDateTime:function(e){return l(e,"year")},fMonthFromDateTime:function(e){return l(e,"month")},fDayFromDateTime:function(e){return l(e,"day")},fHoursFromDateTime:function(e){return l(e,"hours")},fMinutesFromDateTime:function(e){return l(e,"minutes")},fSecondsFromDateTime:function(e){return l(e,"seconds")},fTimezoneFromDateTime:function(e){return l(e,"timezone")},fYearFromDate:function(e){return l(e,"year")},fMonthFromDate:function(e){return l(e,"month")},fDayFromDate:function(e){return l(e,"day")},fTimezoneFromDate:function(e){return l(e,"timezone")},fHoursFromTime:function(e){return l(e,"hours")},fMinutesFromTime:function(e){return l(e,"minutes")},fSecondsFromTime:function(e){return l(e,"seconds")},fTimezoneFromTime:function(e){return l(e,"timezone")},fAdjustDateTimeToTimezone:function(e,t){return a.adjustTimezone(e,arguments.length>1&&null!=t?arguments.length>1?t:this.timezone:null)},fAdjustDateToTimezone:function(e,t){return a.adjustTimezone(e,arguments.length>1&&null!=t?arguments.length>1?t:this.timezone:null)},fAdjustTimeToTimezone:function(e,t){return a.adjustTimezone(e,arguments.length>1&&null!=t?arguments.length>1?t:this.timezone:null)}}}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=n(8),r=n(9),a=n(7),s=n(3),u=n(17),f=n(15),c=t.NaN;e.exports={fName:function(e){if(arguments.length){if(null==e)return new s("")}else{if(!this.DOMAdapter.isNode(this.item))throw new i("XPTY0004","name() function called when the context item is not a node");e=this.item}var t=r.functions["node-name"].call(this,e);return new s(null==t?"":t.toString())},fLocalName:function(e){if(arguments.length){if(null==e)return new s("")}else{if(!this.DOMAdapter.isNode(this.item))throw new i("XPTY0004","local-name() function called when the context item is not a node");e=this.item}return new s(this.DOMAdapter.getProperty(e,"localName")||"")},fNamespaceUri:function(e){if(arguments.length){if(null==e)return f.cast(new s(""))}else{if(!this.DOMAdapter.isNode(this.item))throw new i("XPTY0004","namespace-uri() function called when the context item is not a node");e=this.item}return f.cast(new s(this.DOMAdapter.getProperty(e,"namespaceURI")||""))},fNumber:function(e){if(!arguments.length){if(!this.item)throw new i("XPDY0002");e=o.atomize([this.item],this)[0]}var t=new u(c);if(null!=e)try{t=u.cast(e)}catch(e){}return t},fLang:function(e,t){if(arguments.length<2){if(!this.DOMAdapter.isNode(this.item))throw new i("XPTY0004","lang() function called when the context item is not a node");t=this.item}var n,o=this.DOMAdapter.getProperty;for(2==o(t,"nodeType")&&(t=o(t,"ownerElement"));t;t=o(t,"parentNode"))if(n=o(t,"attributes"))for(var r=0,s=n.length;r<s;r++)if("xml:lang"==o(n[r],"nodeName"))return new a(o(n[r],"value").replace(/-.+/,"").toLowerCase()==e.valueOf().replace(/-.+/,"").toLowerCase());return new a(!1)},fRoot:function(e){if(arguments.length){if(null==e)return null}else{if(!this.DOMAdapter.isNode(this.item))throw new i("XPTY0004","root() function called when the context item is not a node");e=this.item}var t=this.DOMAdapter.getProperty;2==t(e,"nodeType")&&(e=t(e,"ownerElement"));for(var n=e;n;n=t(e,"parentNode"))e=n;return e}}}).call(this,n(2))},function(e,t,n){(function(t){var i=n(9),o=n(14),r=n(5),a=t.Math;e.exports={fAbs:function(e){return new o(a.abs(e))},fCeiling:function(e){return new o(a.ceil(e))},fFloor:function(e){return new o(a.floor(e))},fRound:function(e){return new o(a.round(e))},fRoundHalfToEven:function(e,t){var n=arguments.length>1?t.valueOf():0;if(n<0){var s=new r(a.pow(10,-n)),u=a.round(i.operators["numeric-divide"].call(this,e,s)),f=new r(u);return nDecimal=a.abs(i.operators["numeric-subtract"].call(this,f,i.operators["numeric-divide"].call(this,e,s))),i.operators["numeric-multiply"].call(this,i.operators["numeric-add"].call(this,f,new o(.5==nDecimal&&u%2?-1:0)),s)}return s=new r(a.pow(10,n)),u=a.round(i.operators["numeric-multiply"].call(this,e,s)),f=new r(u),nDecimal=a.abs(i.operators["numeric-subtract"].call(this,f,i.operators["numeric-multiply"].call(this,e,s))),i.operators["numeric-divide"].call(this,i.operators["numeric-add"].call(this,f,new o(.5==nDecimal&&u%2?-1:0)),s)}}}).call(this,n(2))},function(e,t,n){var i=n(0),o=n(3),r=n(21),a=n(15),s=n(22),u=/^(?:(?![0-9-])(\w[\w.-]*)\:)?(?![0-9-])(\w[\w.-]*)$/;e.exports={fResolveQName:function(e,t){if(null==e)return null;var n=e.valueOf(),o=n.match(u);if(!o)throw new i("FOCA0002","Invalid QName '"+n+"'");var a=o[1]||null,s=o[2],f=this.DOMAdapter.lookupNamespaceURI(t,a);if(null!=a&&!f)throw new i("FONS0004","Namespace prefix '"+a+"' has not been declared");return new r(a,s,f||null)},fQName:function(e,t){var n=t.valueOf(),o=n.match(u);if(!o)throw new i("FOCA0002","Invalid QName '"+n+"'");return new r(o[1]||null,o[2]||null,null==e?"":e.valueOf())},fPrefixFromQName:function(e){return null!=e&&e.prefix?new s(e.prefix):null},fLocalNameFromQName:function(e){return null==e?null:new s(e.localName)},fNamespaceUriFromQName:function(e){return null==e?null:a.cast(new o(e.namespaceURI||""))},fNamespaceUriForPrefix:function(e,t){var n=null==e?"":e.valueOf(),i=this.DOMAdapter.lookupNamespaceURI(t,n||null);return null==i?null:a.cast(new o(i))},fInScopePrefixes:function(e){throw"Function 'in-scope-prefixes' not implemented"}}},function(e,t,n){(function(t){var i=n(0),o=n(9),r=n(8),a=n(31),s=n(30),u=n(27),f=n(10),c=n(17),l=n(5),p=n(7),m=n(3),h=t.Math,d=t.String,y=function(e){return d(e).trim()},v=function(e,t){return e.indexOf(t)};e.exports={fBoolean:function(e){return new p(r.toEBV(e,this))},fIndexOf:function(e,t,n){if(!e.length||null==t)return[];var i=t;i instanceof f&&(i=m.cast(i));for(var o,r=[],a=0,s=e.length;a<s;a++)(o=e[a])instanceof f&&(o=m.cast(o)),o.valueOf()===i.valueOf()&&r.push(new l(a+1));return r},fEmpty:function(e){return new p(!e.length)},fExists:function(e){return new p(!!e.length)},fDistinctValues:function(e,t){if(arguments.length>1)throw"Collation parameter in function 'distinct-values' is not implemented";if(!e.length)return null;for(var n,i=[],o=0,r=e.length;o<r;o++){(n=e[o])instanceof f&&(n=m.cast(n));for(var a,s=0,u=i.length,c=!1;s<u&&!c;s++)(a=i[s])instanceof f&&(a=m.cast(a)),a.valueOf()===n.valueOf()&&(c=!0);c||i.push(e[o])}return i},fInsertBefore:function(e,t,n){if(!e.length)return n;if(!n.length)return e;var i=e.length,o=t.valueOf();o<1?o=1:o>i&&(o=i+1);for(var r=[],a=0;a<i;a++)o==a+1&&(r=r.concat(n)),r.push(e[a]);return o==a+1&&(r=r.concat(n)),r},fRemove:function(e,t){if(!e.length)return[];var n=e.length,i=t.valueOf();if(i<1||i>n)return e;for(var o=[],r=0;r<n;r++)i!=r+1&&o.push(e[r]);return o},fReverse:function(e){return e.reverse(),e},fSubsequence:function(e,t,n){var i=h.round(t),o=arguments.length>2?h.round(n):e.length-i+1;return e.slice(i-1,i-1+o)},fUnordered:function(e){return e},fZeroOrOne:function(e){if(e.length>1)throw new i("FORG0003");return e},fOneOrMore:function(e){if(!e.length)throw new i("FORG0004");return e},fExactlyOne:function(e){if(1!=e.length)throw new i("FORG0005");return e},fDeepEqual:function(e,t,n){throw"Function 'deep-equal' not implemented"},fCount:function(e){return new l(e.length)},fAvg:function(e){if(!e.length)return null;try{var t=e[0];t instanceof f&&(t=c.cast(t));for(var n,o=1,r=e.length;o<r;o++)(n=e[o])instanceof f&&(n=c.cast(n)),t=u.operators["+"](t,n,this);return s.operators.div(t,new l(r),this)}catch(e){throw"XPTY0004"!=e.code?e:new i("FORG0006","Input to avg() contains a mix of types")}},fMax:function(e,t){if(!e.length)return null;try{var n=e[0];n instanceof f&&(n=c.cast(n));for(var o,r=1,s=e.length;r<s;r++)(o=e[r])instanceof f&&(o=c.cast(o)),a.vcOperators.ge(o,n,this).valueOf()&&(n=o);return n}catch(e){throw"XPTY0004"!=e.code?e:new i("FORG0006","Input to max() contains a mix of not comparable values")}},fMin:function(e,t){if(!e.length)return null;try{var n=e[0];n instanceof f&&(n=c.cast(n));for(var o,r=1,s=e.length;r<s;r++)(o=e[r])instanceof f&&(o=c.cast(o)),a.vcOperators.le(o,n,this).valueOf()&&(n=o);return n}catch(e){throw"XPTY0004"!=e.code?e:new i("FORG0006","Input to min() contains a mix of not comparable values")}},fSum:function(e,t){if(!e.length)return arguments.length>1?t:new c(0);try{var n=e[0];n instanceof f&&(n=c.cast(n));for(var o,r=1,a=e.length;r<a;r++)(o=e[r])instanceof f&&(o=c.cast(o)),n=u.operators["+"](n,o,this);return n}catch(e){throw"XPTY0004"!=e.code?e:new i("FORG0006","Input to sum() contains a mix of types")}},fId:function(e,t){if(arguments.length<2){if(!this.DOMAdapter.isNode(this.item))throw new i("XPTY0004","id() function called when the context item is not a node");t=this.item}var n=o.functions.root.call(this,t);if(9!=this.DOMAdapter.getProperty(n,"nodeType"))throw new i("FODC0001");for(var a=[],s=0;s<e.length;s++)for(var u=0,f=y(e[s]).split(/\s+/),c=f.length;u<c;u++)(t=this.DOMAdapter.getElementById(n,f[u]))&&-1==v(a,t)&&a.push(t);return r.order(a,this)},fIdref:function(e,t){throw"Function 'idref' not implemented"},fDoc:function(e){return arguments.length<1?null:this.staticContext.documents[e.valueOf()]||null},fDocAvailable:function(e){return new p(arguments.length>0&&e.valueOf()in this.staticContext.documents)},fCollection:function(e){return arguments.length<1?this.staticContext.defaultCollection:this.staticContext.collections[e.valueOf()]||null},fElementWithId:function(e,t){throw"Function 'element-with-id' not implemented"}}}).call(this,n(2))},function(e,t,n){(function(t){var i=n(0),o=n(8),r=n(102),a=n(7),s=n(5),u=n(3),f=t.encodeURIComponent,c=t.encodeURI,l=t.decodeURI,p=t.RegExp,m=t.Math,h=t.String,d=function(e){return h(e).trim()},y=new r;function v(e,t){var n="À-ÖØ-öø-˿",o="Ͱ-ͽͿ-῿‌-‍",r="⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�",a="A-Z_a-z\\-.0-9·"+n+"̀-ͯ"+o+"‿-⁀"+r,s="A-Z_a-z"+n+o+r;if(e=e.replace(/\[\\i-\[:\]\]/g,"["+s+"]").replace(/\[\\c-\[:\]\]/g,"["+a+"]").replace(/\\i/g,"[:"+s+"]").replace(/\\I/g,"[^:"+s+"]").replace(/\\c/g,"[:"+a+"]").replace(/\\C/g,"[^:"+a+"]"),t&&!t.match(/^[smix]+$/))throw new i("FORX0001");var u=t.indexOf("s")>=0,f=t.indexOf("x")>=0;if(u||f){t=t.replace(/[sx]/g,"");for(var c,l=[],m=/\s/,h=0,d=e.length,y=!1,v="";h<d;h++)c=e.charAt(h),"\\"!=v&&("["==c?y=!0:"]"==c&&(y=!1)),!y&&f&&m.test(c)||(l[l.length]=!y&&u&&"."==c&&"\\"!=v?"(?:.|\\s)":c),v=c;e=l.join("")}return new p(e,t+"g")}y.equals=function(e,t){return e==t},y.compare=function(e,t){return e==t?0:e>t?1:-1},e.exports={fCodepointsToString:function(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(h.fromCharCode(e[n]));return new u(t.join(""))},fStringToCodepoints:function(e){if(null==e)return null;var t=e.valueOf();if(""==t)return[];for(var n=[],i=0,o=t.length;i<o;i++)n.push(new s(t.charCodeAt(i)));return n},fCompare:function(e,t,n){if(null==e||null==t)return null;var o,r=this.staticContext.defaultCollationName;if(arguments.length>2&&(r=n.valueOf()),!(o="http://www.w3.org/2005/xpath-functions/collation/codepoint"==r?y:this.staticContext.getCollation(r)))throw new i("FOCH0002","Unknown collation {"+r+"}");return new s(o.compare(e.valueOf(),t.valueOf()))},fCodepointEqual:function(e,t){return null==e||null==t?null:new a(e.valueOf()==t.valueOf())},fConcat:function(){if(arguments.length<2)throw new i("XPST0017","Function concat() must have at least 2 arguments");for(var e,t=[],n=0,r=arguments.length;n<r;n++)e=arguments[n],o.assertSequenceCardinality(e,this,"?","each argument of concat()"),e.length&&(t[t.length]=u.cast(o.atomize(e,this)[0]).valueOf());return new u(t.join(""))},fStringJoin:function(e,t){return new u(e.join(t))},fSubstring:function(e,t,n){var i=null==e?"":e.valueOf(),o=m.round(t)-1,r=arguments.length>2?o+m.round(n):i.length;return new u(r>o?i.substring(o,r):"")},fStringLength:function(e){if(!arguments.length){if(!this.item)throw new i("XPDY0002");e=u.cast(o.atomize([this.item],this)[0])}return new s(null==e?0:e.valueOf().length)},fNormalizeSpace:function(e){if(!arguments.length){if(!this.item)throw new i("XPDY0002");e=u.cast(o.atomize([this.item],this)[0])}return new u(null==e?"":d(e).replace(/\s\s+/g," "))},fNormalizeUnicode:function(e,t){throw"Function 'normalize-unicode' not implemented"},fUpperCase:function(e){return new u(null==e?"":e.valueOf().toUpperCase())},fLowerCase:function(e){return new u(null==e?"":e.valueOf().toLowerCase())},fTranslate:function(e,t,n){if(null==e)return new u("");for(var i,o=e.valueOf().split(""),r=t.valueOf().split(""),a=n.valueOf().split(""),s=a.length,f=[],c=0,l=o.length;c<l;c++)-1==(i=r.indexOf(o[c]))?f[f.length]=o[c]:i<s&&(f[f.length]=a[i]);return new u(f.join(""))},fEncodeForUri:function(e){return new u(null==e?"":f(e))},fIriToUri:function(e){return new u(null==e?"":c(l(e)))},fEscapeHtmlUri:function(e){if(null==e||""==e.valueOf())return new u("");for(var t,n=e.valueOf().split(""),i=0,o=n.length;i<o;i++)((t=n[i].charCodeAt(0))<32||t>126)&&(n[i]=f(n[i]));return new u(n.join(""))},fContains:function(e,t,n){if(arguments.length>2)throw"Collation parameter in function 'contains' is not implemented";return new a((null==e?"":e.valueOf()).indexOf(null==t?"":t.valueOf())>=0)},fStartsWith:function(e,t,n){if(arguments.length>2)throw"Collation parameter in function 'starts-with' is not implemented";return new a(0==(null==e?"":e.valueOf()).indexOf(null==t?"":t.valueOf()))},fEndsWith:function(e,t,n){if(arguments.length>2)throw"Collation parameter in function 'ends-with' is not implemented";var i=null==e?"":e.valueOf(),o=null==t?"":t.valueOf();return new a(i.indexOf(o)==i.length-o.length)},fSubstringBefore:function(e,t,n){if(arguments.length>2)throw"Collation parameter in function 'substring-before' is not implemented";var i=null==e?"":e.valueOf(),o=null==t?"":t.valueOf(),r=i.indexOf(o);return new u(r<0?"":i.substring(0,r))},fSubstringAfter:function(e,t,n){if(arguments.length>2)throw"Collation parameter in function 'substring-after' is not implemented";var i=null==e?"":e.valueOf(),o=null==t?"":t.valueOf(),r=i.indexOf(o);return new u(r<0?"":i.substring(r+o.length))},fMatches:function(e,t,n){var i=null==e?"":e.valueOf(),o=v(t.valueOf(),arguments.length>2?n.valueOf():"");return new a(o.test(i))},fReplace:function(e,t,n,i){var o=null==e?"":e.valueOf(),r=v(t.valueOf(),arguments.length>3?i.valueOf():"");return new u(o.replace(r,n.valueOf()))},fTokenize:function(e,t,n){for(var i=null==e?"":e.valueOf(),o=v(t.valueOf(),arguments.length>2?n.valueOf():""),r=[],a=0,s=i.split(o),f=s.length;a<f;a++)r.push(new u(s[a]));return r}}}).call(this,n(2))},function(e,t){function n(){}n.prototype.equals=function(e,t){throw"Not implemented"},n.prototype.compare=function(e,t){throw"Not implemented"},e.exports=n},function(e,t,n){(function(t){e.exports={fTrace:function(e,n){var i=t.console;return i&&i.log&&i.log(n.valueOf(),e),e}}}).call(this,n(2))},function(e,t,n){var i=n(9),o=n(105),r=n(106),a=n(107),s=n(108),u=n(109),f=n(110),c=n(111),l=n(112);i.defineSystemOperator("hexBinary-equal",o.fHexBinaryEqual),i.defineSystemOperator("base64Binary-equal",o.fBase64BinaryEqual),i.defineSystemOperator("boolean-equal",r.fBooleanEqual),i.defineSystemOperator("boolean-less-than",r.fBooleanLessThan),i.defineSystemOperator("boolean-greater-than",r.fBooleanGreaterThan),i.defineSystemOperator("yearMonthDuration-less-than",a.fYearMonthDurationLessThan),i.defineSystemOperator("yearMonthDuration-greater-than",a.fYearMonthDurationGreaterThan),i.defineSystemOperator("dayTimeDuration-less-than",a.fDayTimeDurationLessThan),i.defineSystemOperator("dayTimeDuration-greater-than",a.fDayTimeDurationGreaterThan),i.defineSystemOperator("duration-equal",a.fDurationEqual),i.defineSystemOperator("dateTime-equal",a.fDateTimeEqual),i.defineSystemOperator("dateTime-less-than",a.fDateTimeLessThan),i.defineSystemOperator("dateTime-greater-than",a.fDateTimeGreaterThan),i.defineSystemOperator("date-equal",a.fDateEqual),i.defineSystemOperator("date-less-than",a.fDateLessThan),i.defineSystemOperator("date-greater-than",a.fDateGreaterThan),i.defineSystemOperator("time-equal",a.fTimeEqual),i.defineSystemOperator("time-less-than",a.fTimeLessThan),i.defineSystemOperator("time-greater-than",a.fTimeGreaterThan),i.defineSystemOperator("gYearMonth-equal",a.fGYearMonthEqual),i.defineSystemOperator("gYear-equal",a.fGYearEqual),i.defineSystemOperator("gMonthDay-equal",a.fGMonthDayEqual),i.defineSystemOperator("gMonth-equal",a.fGMonthEqual),i.defineSystemOperator("gDay-equal",a.fGDayEqual),i.defineSystemOperator("add-yearMonthDurations",a.fAddYearMonthDurations),i.defineSystemOperator("subtract-yearMonthDurations",a.fSubtractYearMonthDurations),i.defineSystemOperator("multiply-yearMonthDuration",a.fMultiplyYearMonthDuration),i.defineSystemOperator("divide-yearMonthDuration",a.fDivideYearMonthDuration),i.defineSystemOperator("divide-yearMonthDuration-by-yearMonthDuration",a.fDivideYearMonthDurationByYearMonthDuration),i.defineSystemOperator("add-dayTimeDurations",a.fAddDayTimeDurations),i.defineSystemOperator("subtract-dayTimeDurations",a.fSubtractDayTimeDurations),i.defineSystemOperator("multiply-dayTimeDuration",a.fMultiplyDayTimeDuration),i.defineSystemOperator("divide-dayTimeDuration",a.fDivideDayTimeDuration),i.defineSystemOperator("divide-dayTimeDuration-by-dayTimeDuration",a.fDivideDayTimeDurationByDayTimeDuration),i.defineSystemOperator("subtract-dateTimes",a.fSubtractDateTimes),i.defineSystemOperator("subtract-dates",a.fSubtractDates),i.defineSystemOperator("subtract-times",a.fSubtractTimes),i.defineSystemOperator("add-yearMonthDuration-to-dateTime",a.fAddYearMonthDurationToDateTime),i.defineSystemOperator("add-dayTimeDuration-to-dateTime",a.fAddDayTimeDurationToDateTime),i.defineSystemOperator("subtract-yearMonthDuration-from-dateTime",a.fSubtractYearMonthDurationToDateTime),i.defineSystemOperator("subtract-dayTimeDuration-from-dateTime",a.fSubtractDayTimeDurationToDateTime),i.defineSystemOperator("add-yearMonthDuration-to-date",a.fAddYearMonthDurationToDate),i.defineSystemOperator("add-dayTimeDuration-to-date",a.fAddDayTimeDurationToDate),i.defineSystemOperator("subtract-yearMonthDuration-from-date",a.fSubtractYearMonthDurationFromDate),i.defineSystemOperator("subtract-dayTimeDuration-from-date",a.fSubtractDayTimeDurationFromDate),i.defineSystemOperator("add-dayTimeDuration-to-time",a.fAddDayTimeDurationToTime),i.defineSystemOperator("subtract-dayTimeDuration-from-time",a.fSubtractDayTimeDurationFromTime),i.defineSystemOperator("is-same-node",s.fIsSameNode),i.defineSystemOperator("node-before",s.fNodeBefore),i.defineSystemOperator("node-after",s.fNodeAfter),i.defineSystemOperator("NOTATION-equal",u.fNotationEqual),i.defineSystemOperator("numeric-add",f.fNumericAdd),i.defineSystemOperator("numeric-subtract",f.fNumericSubtract),i.defineSystemOperator("numeric-multiply",f.fNumericMultiply),i.defineSystemOperator("numeric-divide",f.fNumericDivide),i.defineSystemOperator("numeric-integer-divide",f.fNumericIntegerDivide),i.defineSystemOperator("numeric-mod",f.fNumericMod),i.defineSystemOperator("numeric-unary-plus",f.fNumericUnaryPlus),i.defineSystemOperator("numeric-unary-minus",f.fNumericUnaryMinus),i.defineSystemOperator("numeric-equal",f.fNumericEqual),i.defineSystemOperator("numeric-less-than",f.fNumericLessThan),i.defineSystemOperator("numeric-greater-than",f.fNumericGreaterThan),i.defineSystemOperator("QName-equal",c.fQNameEqual),i.defineSystemOperator("concatenate",l.fConcatenate),i.defineSystemOperator("union",l.fUnion),i.defineSystemOperator("intersect",l.fIntersect),i.defineSystemOperator("except",l.fExcept),i.defineSystemOperator("to",l.fTo)},function(e,t,n){var i=n(7);e.exports={fHexBinaryEqual:function(e,t){return new i(e.valueOf()==t.valueOf())},fBase64BinaryEqual:function(e,t){return new i(e.valueOf()==t.valueOf())}}},function(e,t,n){var i=n(7);e.exports={fBooleanEqual:function(e,t){return new i(e.valueOf()==t.valueOf())},fBooleanLessThan:function(e,t){return new i(e.valueOf()<t.valueOf())},fBooleanGreaterThan:function(e,t){return new i(e.valueOf()>t.valueOf())}}},function(e,t,n){(function(t){var i=n(7),o=n(14),r=n(11),a=n(16),s=n(18),u=n(13),f=n(20),c=t.Date,l=t.Math;function p(e,t,n){var o=T(e),r=T(t);return new i("lt"==n?o<r:"gt"==n?o>r:o==r)}function m(e,t,n){return h(r.cast(e),r.cast(t),n)}function h(e,t,n){var o=new u(0,0,0,0),a=r.adjustTimezone(new r(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.timezone,e.negative),o).toString(),s=r.adjustTimezone(new r(t.year,t.month,t.day,t.hours,t.minutes,t.seconds,t.timezone,t.negative),o).toString();return new i("lt"==n?a<s:"gt"==n?a>s:a==s)}function d(e,t,n){var i;e instanceof a?i=new a(e.year,e.month,e.day,e.timezone,e.negative):e instanceof r&&(i=new r(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.timezone,e.negative)),i.year=i.year+t.year*("-"==n?-1:1),i.month=i.month+t.month*("-"==n?-1:1),r.normalizeDate(i,!0);var o=r.getDaysForYearMonth(i.year,i.month);return i.day>o&&(i.day=o),i}function y(e,t,n){var i;if(e instanceof a){var o=60*(60*t.hours+t.minutes)+t.seconds;(i=new a(e.year,e.month,e.day,e.timezone,e.negative)).day=i.day+t.day*("-"==n?-1:1)-1*(o&&"-"==n),r.normalizeDate(i)}else e instanceof r&&((i=new r(e.year,e.month,e.day,e.hours,e.minutes,e.seconds,e.timezone,e.negative)).seconds=i.seconds+t.seconds*("-"==n?-1:1),i.minutes=i.minutes+t.minutes*("-"==n?-1:1),i.hours=i.hours+t.hours*("-"==n?-1:1),i.day=i.day+t.day*("-"==n?-1:1),r.normalize(i));return i}function v(e){return(12*e.year+e.month)*(e.negative?-1:1)}function w(e){var t=(e=l.round(e))<0,n=~~((e=l.abs(e))/12),i=e-=12*n;return new f(n,i,t)}function T(e){return e.seconds+60*(e.minutes-(null!=e.timezone?e.timezone%60:0)+60*(e.hours-(null!=e.timezone?~~(e.timezone/60):0)))}function g(e){var t=new c((e.negative?-1:1)*e.year,e.month,e.day,0,0,0,0);return e instanceof r&&(t.setHours(e.hours),t.setMinutes(e.minutes),t.setSeconds(e.seconds)),null!=e.timezone&&t.setMinutes(t.getMinutes()-e.timezone),t.getTime()/1e3}e.exports={fYearMonthDurationLessThan:function(e,t){return new i(v(e)<v(t))},fYearMonthDurationGreaterThan:function(e,t){return new i(v(e)>v(t))},fDayTimeDurationLessThan:function(e,t){return new i(u.toSeconds(e)<u.toSeconds(t))},fDayTimeDurationGreaterThan:function(e,t){return new i(u.toSeconds(e)>u.toSeconds(t))},fDurationEqual:function(e,t){return new i(e.negative==t.negative&&v(e)==v(t)&&u.toSeconds(e)==u.toSeconds(t))},fDateTimeEqual:function(e,t){return h(e,t,"eq")},fDateTimeLessThan:function(e,t){return h(e,t,"lt")},fDateTimeGreaterThan:function(e,t){return h(e,t,"gt")},fDateEqual:function(e,t){return m(e,t,"eq")},fDateLessThan:function(e,t){return m(e,t,"lt")},fDateGreaterThan:function(e,t){return m(e,t,"gt")},fTimeEqual:function(e,t){return p(e,t,"eq")},fTimeLessThan:function(e,t){return p(e,t,"lt")},fTimeGreaterThan:function(e,t){return p(e,t,"gt")},fGYearMonthEqual:function(e,t){return h(new r(e.year,e.month,r.getDaysForYearMonth(e.year,e.month),0,0,0,null==e.timezone?this.timezone:e.timezone),new r(t.year,t.month,r.getDaysForYearMonth(t.year,t.month),0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},fGYearEqual:function(e,t){return h(new r(e.year,1,1,0,0,0,null==e.timezone?this.timezone:e.timezone),new r(t.year,1,1,0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},fGMonthDayEqual:function(e,t){return h(new r(1972,e.month,e.day,0,0,0,null==e.timezone?this.timezone:e.timezone),new r(1972,t.month,t.day,0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},fGMonthEqual:function(e,t){return h(new r(1972,e.month,r.getDaysForYearMonth(1972,t.month),0,0,0,null==e.timezone?this.timezone:e.timezone),new r(1972,t.month,r.getDaysForYearMonth(1972,t.month),0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},fGDayEqual:function(e,t){return h(new r(1972,12,e.day,0,0,0,null==e.timezone?this.timezone:e.timezone),new r(1972,12,t.day,0,0,0,null==t.timezone?this.timezone:t.timezone),"eq")},fAddYearMonthDurations:function(e,t){return w(v(e)+v(t))},fSubtractYearMonthDurations:function(e,t){return w(v(e)-v(t))},fMultiplyYearMonthDuration:function(e,t){return w(v(e)*t)},fDivideYearMonthDuration:function(e,t){return w(v(e)/t)},fDivideYearMonthDurationByYearMonthDuration:function(e,t){return new o(v(e)/v(t))},fAddDayTimeDurations:function(e,t){return u.fromSeconds(u.toSeconds(e)+u.toSeconds(t))},fSubtractDayTimeDurations:function(e,t){return u.fromSeconds(u.toSeconds(e)-u.toSeconds(t))},fMultiplyDayTimeDuration:function(e,t){return u.fromSeconds(u.toSeconds(e)*t)},fDivideDayTimeDuration:function(e,t){return u.fromSeconds(u.toSeconds(e)/t)},fDivideDayTimeDurationByDayTimeDuration:function(e,t){return new o(u.toSeconds(e)/u.toSeconds(t))},fSubtractDateTimes:function(e,t){return u.fromSeconds(g(e)-g(t))},fSubtractDates:function(e,t){return u.fromSeconds(g(e)-g(t))},fSubtractTimes:function(e,t){return u.fromSeconds(T(e)-T(t))},fAddYearMonthDurationToDateTime:function(e,t){return d(e,t,"+")},fAddDayTimeDurationToDateTime:function(e,t){return y(e,t,"+")},fSubtractYearMonthDurationToDateTime:function(e,t){return d(e,t,"-")},fSubtractDayTimeDurationToDateTime:function(e,t){return y(e,t,"-")},fAddYearMonthDurationToDate:function(e,t){return d(e,t,"+")},fAddDayTimeDurationToDate:function(e,t){return y(e,t,"+")},fSubtractYearMonthDurationFromDate:function(e,t){return d(e,t,"-")},fSubtractDayTimeDurationFromDate:function(e,t){return y(e,t,"-")},fAddDayTimeDurationToTime:function(e,t){var n=new s(e.hours,e.minutes,e.seconds,e.timezone);return n.hours+=t.hours,n.minutes+=t.minutes,n.seconds+=t.seconds,r.normalizeTime(n)},fSubtractDayTimeDurationFromTime:function(e,t){var n=new s(e.hours,e.minutes,e.seconds,e.timezone);return n.hours-=t.hours,n.minutes-=t.minutes,n.seconds-=t.seconds,r.normalizeTime(n)}}}).call(this,n(2))},function(e,t,n){var i=n(7);e.exports={fIsSameNode:function(e,t){return new i(this.DOMAdapter.isSameNode(e,t))},fNodeBefore:function(e,t){return new i(!!(4&this.DOMAdapter.compareDocumentPosition(e,t)))},fNodeAfter:function(e,t){return new i(!!(2&this.DOMAdapter.compareDocumentPosition(e,t)))}}},function(e,t,n){n(7),n(26);e.exports={fNotationEqual:function(e,t){throw"Operator 'NOTATION-equal' not implemented"}}},function(e,t,n){(function(t){var i=n(7),o=n(14),r=n(5),a=t.Math,s=t.isNaN,u=t.isFinite,f=t.String;var c=/^[+-]?(?:(?:(\d+)(?:\.(\d*))?)|(?:\.(\d+)))(?:[eE]([+-])?(\d+))?$/;function l(e,t){if(s(e)||!u(a.abs(e))||s(t)||!u(a.abs(t)))return 0;var n=f(e).match(c),i=f(t).match(c),o=a.max(1,(n[2]||n[3]||"").length+(n[5]||0)*("+"==n[4]?-1:1),(i[2]||i[3]||"").length+(i[5]||0)*("+"==i[4]?-1:1));return o+(o%2?0:1)}function p(e,t,n){return new(e instanceof r&&t instanceof r&&n%1?r:o)(n)}e.exports={fNumericAdd:function(e,t){var n=e.valueOf(),i=t.valueOf(),o=a.pow(10,l(n,i));return p(e,t,(n*o+i*o)/o)},fNumericSubtract:function(e,t){var n=e.valueOf(),i=t.valueOf(),o=a.pow(10,l(n,i));return p(e,t,(n*o-i*o)/o)},fNumericMultiply:function(e,t){var n=e.valueOf(),i=t.valueOf(),o=a.pow(10,l(n,i));return p(e,t,n*o*(i*o)/(o*o))},fNumericDivide:function(e,t){var n=e.valueOf(),i=t.valueOf(),o=a.pow(10,l(n,i));return p(e,t,e*o/(t*o))},fNumericIntegerDivide:function(e,t){var n=e/t;return new r(a.floor(n)+(n<0))},fNumericMod:function(e,t){var n=e.valueOf(),i=t.valueOf(),o=a.pow(10,l(n,i));return p(e,t,n*o%(i*o)/o)},fNumericUnaryPlus:function(e){return e},fNumericUnaryMinus:function(e){return e.value*=-1,e},fNumericEqual:function(e,t){return new i(e.valueOf()==t.valueOf())},fNumericLessThan:function(e,t){return new i(e.valueOf()<t.valueOf())},fNumericGreaterThan:function(e,t){return new i(e.valueOf()>t.valueOf())}}}).call(this,n(2))},function(e,t,n){var i=n(7);e.exports={fQNameEqual:function(e,t){return new i(e.localName==t.localName&&e.namespaceURI==t.namespaceURI)}}},function(e,t,n){var i=n(0),o=n(8),r=n(5),a=function(e,t){return e.indexOf(t)};e.exports={fConcatenate:function(e,t){return e.concat(t)},fUnion:function(e,t){for(var n=[],r=0,s=e.length;r<s;r++){if(!this.DOMAdapter.isNode(u=e[r]))throw new i("XPTY0004","Required item type of first operand of 'union' is node()");-1==a(n,u)&&n.push(u)}var u;for(r=0,s=t.length;r<s;r++){if(!this.DOMAdapter.isNode(u=t[r]))throw new i("XPTY0004","Required item type of second operand of 'union' is node()");-1==a(n,u)&&n.push(u)}return o.order(n,this)},fIntersect:function(e,t){for(var n,r,s=[],u=0,f=e.length;u<f;u++){if(!this.DOMAdapter.isNode(n=e[u]))throw new i("XPTY0004","Required item type of second operand of 'intersect' is node()");r=!1;for(var c=0,l=t.length;c<l&&!r;c++){if(!this.DOMAdapter.isNode(t[c]))throw new i("XPTY0004","Required item type of first operand of 'intersect' is node()");r=this.DOMAdapter.isSameNode(t[c],n)}r&&-1==a(s,n)&&s.push(n)}return o.order(s,this)},fExcept:function(e,t){for(var n,r,s=[],u=0,f=e.length;u<f;u++){if(!this.DOMAdapter.isNode(n=e[u]))throw new i("XPTY0004","Required item type of second operand of 'except' is node()");r=!1;for(var c=0,l=t.length;c<l&&!r;c++){if(!this.DOMAdapter.isNode(t[c]))throw new i("XPTY0004","Required item type of first operand of 'except' is node()");r=this.DOMAdapter.isSameNode(t[c],n)}r||-1!=a(s,n)||s.push(n)}return o.order(s,this)},fTo:function(e,t){for(var n=[],i=e.valueOf(),o=t.valueOf();i<=o;i++)n.push(new r(i));return n}}},function(e,t,n){var i=n(9),o=(n(25),n(6),n(114),n(4)),r=(n(115),n(116),n(117),n(15)),a=n(33),s=n(7),u=n(16),f=n(11),c=n(14),l=n(17),p=n(19),m=n(118),h=n(38),d=n(36),y=n(37),v=n(35),w=n(34),T=n(32),g=n(26),D=n(21),S=n(3),x=n(18),I=n(10),N=n(13),O=n(20),E=n(119),M=n(46),b=n(5),P=n(47),F=n(120),A=n(24),R=n(48),X=n(121),Y=n(45),_=n(122),z=n(50),C=n(123),U=n(49),q=n(124),k=n(125),G=n(126),K=n(127),B=n(43),V=n(22),L=n(128),H=n(44),j=n(23);i.defineSystemDataType("anyAtomicType",o),i.defineSystemDataType("anyURI",r),i.defineSystemDataType("base64Binary",a),i.defineSystemDataType("boolean",s),i.defineSystemDataType("date",u),i.defineSystemDataType("dateTime",f),i.defineSystemDataType("decimal",c),i.defineSystemDataType("double",l),i.defineSystemDataType("duration",p),i.defineSystemDataType("float",m),i.defineSystemDataType("gDay",h),i.defineSystemDataType("gMonth",d),i.defineSystemDataType("gMonthDay",y),i.defineSystemDataType("gYear",v),i.defineSystemDataType("gYearMonth",w),i.defineSystemDataType("hexBinary",T),i.defineSystemDataType("NOTATION",g),i.defineSystemDataType("QName",D),i.defineSystemDataType("string",S),i.defineSystemDataType("time",x),i.defineSystemDataType("untypedAtomic",I),i.defineSystemDataType("yearMonthDuration",O),i.defineSystemDataType("dayTimeDuration",N),i.defineSystemDataType("byte",E),i.defineSystemDataType("int",M),i.defineSystemDataType("integer",b),i.defineSystemDataType("long",P),i.defineSystemDataType("negativeInteger",F),i.defineSystemDataType("nonNegativeInteger",A),i.defineSystemDataType("nonPositiveInteger",R),i.defineSystemDataType("positiveInteger",X),i.defineSystemDataType("short",Y),i.defineSystemDataType("unsignedByte",_),i.defineSystemDataType("unsignedInt",z),i.defineSystemDataType("unsignedLong",C),i.defineSystemDataType("unsignedShort",U),i.defineSystemDataType("ENTITY",q),i.defineSystemDataType("ID",k),i.defineSystemDataType("IDREF",G),i.defineSystemDataType("language",K),i.defineSystemDataType("Name",B),i.defineSystemDataType("NCName",V),i.defineSystemDataType("NMTOKEN",L),i.defineSystemDataType("normalizedString",H),i.defineSystemDataType("token",j)},function(e,t,n){var i=n(1),o=n(25);function r(){}r.prototype=new o,r.prototype.builtInKind=i.UNAVAILABLE_DT,e.exports=r},function(e,t,n){var i=n(6);function o(){}o.prototype=new i,e.exports=o},function(e,t,n){var i=n(6);function o(){}o.prototype=new i,e.exports=o},function(e,t,n){var i=n(6);function o(){}o.prototype=new i,e.exports=o},function(e,t,n){(function(t){var i=n(0),o=n(1),r=n(6),a=n(4),s=n(10),u=n(3),f=n(7),c=t.String;function l(e){this.value=e}l.prototype=new a,l.prototype.builtInKind=o.FLOAT_DT,l.prototype.primitiveKind=r.PRIMITIVE_FLOAT,l.prototype.value=null,l.prototype.valueOf=function(){return this.value},l.prototype.toString=function(){return c(this.value)};var p=/^([+\-]?((\d+(\.\d*)?)|(\.\d+))([eE][+\-]?\d+)?|(-?INF)|NaN)$/;l.cast=function(e){if(e instanceof l)return e;if(e instanceof u||e instanceof s){var t=(n=e,c(n).trim()).match(p);if(t)return new l(t[7]?+t[7].replace("INF","Infinity"):+e);throw new i("FORG0001")}var n;if(e instanceof f)return new l(1*e);if(e.primitiveKind==r.PRIMITIVE_DECIMAL||e.primitiveKind==r.PRIMITIVE_DOUBLE)return new l(e.value);throw new i("XPTY0004","Casting value '"+e+"' to xs:float can never succeed")},e.exports=l}).call(this,n(2))},function(e,t,n){var i=n(0),o=n(1),r=n(5),a=n(45);function s(e){this.value=e}s.prototype=new a,s.prototype.builtInKind=o.BYTE_DT,s.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value<=127&&t.value>=-128)return new s(t.value);throw new i("FORG0001")},e.exports=s},function(e,t,n){var i=n(0),o=n(1),r=n(5),a=n(48);function s(e){this.value=e}s.prototype=new a,s.prototype.builtInKind=o.NEGATIVEINTEGER_DT,s.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value<=-1)return new s(t.value);throw new i("FORG0001")},e.exports=s},function(e,t,n){var i=n(0),o=n(1),r=n(5),a=n(24);function s(e){this.value=e}s.prototype=new a,s.prototype.builtInKind=o.POSITIVEINTEGER_DT,s.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value>=1)return new s(t.value);throw new i("FORG0001")},e.exports=s},function(e,t,n){var i=n(0),o=n(1),r=n(5),a=n(49);function s(e){this.value=e}s.prototype=new a,s.prototype.builtInKind=o.UNSIGNEDBYTE_DT,s.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value>=1&&t.value<=255)return new s(t.value);throw new i("FORG0001")},e.exports=s},function(e,t,n){var i=n(0),o=n(1),r=n(5),a=n(24);function s(e){this.value=e}s.prototype=new a,s.prototype.builtInKind=o.UNSIGNEDLONG_DT,s.cast=function(e){var t;try{t=r.cast(e)}catch(e){throw e}if(t.value>=1&&t.value<=0x10000000000000000)return new s(t.value);throw new i("FORG0001")},e.exports=s},function(e,t,n){(function(t){var i=n(1),o=n(22),r=t.String;function a(e){this.value=e}a.prototype=new o,a.prototype.builtInKind=i.ENTITY_DT,a.cast=function(e){return new a(r(e))},e.exports=a}).call(this,n(2))},function(e,t,n){(function(t){var i=n(1),o=n(22),r=t.String;function a(e){this.value=e}a.prototype=new o,a.prototype.builtInKind=i.ID_DT,a.cast=function(e){return new a(r(e))},e.exports=a}).call(this,n(2))},function(e,t,n){(function(t){var i=n(1),o=n(22),r=t.String;function a(e){this.value=e}a.prototype=new o,a.prototype.builtInKind=i.IDREF_DT,a.cast=function(e){return new a(r(e))},e.exports=a}).call(this,n(2))},function(e,t,n){(function(t){var i=n(1),o=n(23),r=t.String;function a(e){this.value=e}a.prototype=new o,a.prototype.builtInKind=i.LANGUAGE_DT,a.cast=function(e){return new a(r(e))},e.exports=a}).call(this,n(2))},function(e,t,n){(function(t){var i=n(1),o=n(23),r=t.String;function a(e){this.value=e}a.prototype=new o,a.prototype.builtInKind=i.NMTOKEN_DT,a.cast=function(e){return new a(r(e))},e.exports=a}).call(this,n(2))}])}));