<!DOCTYPE html>
<html>
	<head>
		<title>JsUnit testing page</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

		<!-- JsUnitClient driver -->
		<script type="text/javascript" src="../../jsUnitClient.js"></script>

		<!-- Library -->
		<script type="text/javascript" src="../../../../xpath.js"></script>

		<!-- Suite definition -->
		<script type="text/javascript">
			// Helper function
			function evaluateXPath(sXPath) {
				return xpath.evaluate(sXPath);
			}

			function evaluateXPathSingle(sXPath) {
				return evaluateXPath(sXPath)[0];
			}

			// Tests
			function testAdditiveAdd() {
				assertEquals(5, evaluateXPathSingle("3 + 2"));
			}
			function testAdditiveSub() {
				assertEquals(-1, evaluateXPathSingle("2 - 3"));
			}
			function testAdditiveAddSub() {
				assertEquals(1, evaluateXPathSingle("3 + 2 - 4"));
			}
			function testUnaryMinus() {
				assertEquals(-2, evaluateXPathSingle("-2"));
			}
			function testUnaryPlus() {
				assertEquals(2, evaluateXPathSingle("+2"));
			}
			function testMultiplicativeMul() {
				assertEquals(6, evaluateXPathSingle("2 * 3"));
			}
			function testMultiplicativeMulMul() {
				assertEquals(24, evaluateXPathSingle("2 * 3 * 4"));
			}
			function testMultiplicativeMulNegative() {
				assertEquals(-6, evaluateXPathSingle("2 *-3"));
			}
			function testMultiplicativeDiv() {
				assertEquals(2, evaluateXPathSingle("6 div 3"));
			}
			function testMultiplicativeDivDiv() {
				assertEquals(1, evaluateXPathSingle("6 div 3 div 2"));
			}
			function testMultiplicativeDivDouble() {
				assertEquals(0.5, evaluateXPathSingle("1 div 2"));
			}
			function testMultiplicativeIdiv() {
				assertEquals(1, evaluateXPathSingle("5 idiv 3"));
			}
			function testMultiplicativeMod() {
				assertEquals(2, evaluateXPathSingle("5 mod 3"));
			}
			// Test evaluation order
			function testOrderMulAdd() {
				assertEquals(14, evaluateXPathSingle("3 * 4 + 2"));
			}
			function testOrderMulAddInBrackets() {
				assertEquals(18, evaluateXPathSingle("3 * (4 + 2)"));
			}
			function testOrderAddMul() {
				assertEquals(11, evaluateXPathSingle("3 + 2 * 4"));
			}
		</script>
	</head>
	<body>
		<p>XPath.js JsUnit unit page</p>
	</body>
</html>
